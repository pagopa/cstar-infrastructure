openapi: 3.0.1
info:
  title: IDPAY Assistance API
  description: API for assistance
  version: '1.0'
servers:
  - url: https://api-io.dev.cstar.pagopa.it/idpay/assistance
paths:
  '/organizations':
    get:
      tags:
        - organizations
      summary: "ENG: Returns list of Organizations for at least one initiative by each visible to the PagoPA operator - IT: Mostra una lista di enti con almeno un'iniziativa ciascuno visibili all'operatore PagoPA"
      operationId: getListOfOrganization
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrganizationListDTO'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InitiativeErrorDTO'
              example:
                code: "INITIATIVE_INVALID_REQUEST"
                message: "Something went wrong handling the request"
        '401':
          description: Authentication failed
        '404':
          description: The requested initiative was not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InitiativeErrorDTO'
              example:
                code: "INITIATIVE_NOT_FOUND"
                message: "Initiative not found"
        '429':
          description: Too many Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InitiativeErrorDTO'
              example:
                code: "INITIATIVE_TOO_MANY_REQUESTS"
                message: "Too many requests"
        '500':
          description: Server ERROR
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InitiativeErrorDTO'
              example:
                code: "INITIATIVE_GENERIC_ERROR"
                message: "Application error"
  /organization/{organizationId}/summary:
    get:
      tags:
        - initiative
      summary: "ENG: Returns the list of initiatives names for a specific organization - IT: Mostra una lista di iniziative per uno specifico ente"
      description: "ENG: Returns the list of initiatives names for a specific organization - IT: Mostra una lista di iniziative per uno specifico ente"
      operationId: getInitativeSummary
      parameters:
        - name: organizationId
          in: path
          description: "ENG: The ID of the organization - IT: L'ID dell'organizzazione"
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InitiativeSummaryArrayDTO'
        '401':
          description: Authentication failed
        '429':
          description: Too many Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InitiativeErrorDTO'
              example:
                code: "INITIATIVE_TOO_MANY_REQUESTS"
                message: "Too many requests"
        '500':
          description: Server ERROR
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InitiativeErrorDTO'
              example:
                code: "INITIATIVE_GENERIC_ERROR"
                message: "Application error"

  /organization/{organizationId}/initiative/{initiativeId}/statistics:
    get:
      tags:
        - initiative
      summary: "ENG: Return the number of onboarded users and the budget spent (accrued bonus) - IT: Mostra il numero di utenti onboardati ed il budget speso (bonus maturato)"
      operationId: initiativeStatistics
      parameters:
        - name: initiativeId
          in: path
          description: "ENG: The ID of the initiative - IT: L'ID dell'iniziativa"
          required: true
          schema:
            type: string
        - name: organizationId
          in: path
          description: "ENG: The ID of the organization - IT: L'ID dell'organizzazione"
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InitiativeStatisticsDTO'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StatisticsErrorDTO'
              example:
                code: "STATISTICS_INVALID_REQUEST"
                message: "Something went wrong handling request"
        '401':
          description: Authentication failed
        '404':
          description: The requested ID was not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StatisticsErrorDTO'
              example:
                code: "STATISTICS_NOT_FOUND"
                message: "Stats not found"
        '429':
          description: Too many Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StatisticsErrorDTO'
              example:
                code: "STATISTICS_MANAGER_TOO_MANY_REQUESTS"
                message: "Too many requests"
        '500':
          description: Server ERROR
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StatisticsErrorDTO'
              example:
                code: "STATISTICS_MANAGER_GENERIC_ERROR"
                message: "Application error"
  /organization/{organizationId}/initiative/{initiativeId}:
    get:
      tags:
        - initiative
      summary: "ENG: Returns the detail of an active initiative - IT: Mostra il dettaglio di un'iniziativa attiva"
      description: "ENG: Returns the detail of an active initiative - IT: Mostra il dettaglio di un'iniziativa attiva"
      operationId: getInitiativeDetail
      parameters:
        - name: initiativeId
          in: path
          description: "ENG: The ID of the initiative - IT: L'ID dell'iniziativa"
          required: true
          schema:
            type: string
        - name: organizationId
          in: path
          description: "ENG: The ID of the organization - IT: L'ID dell'organizzazione"
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InitiativeDTO'
        '401':
          description: Authentication failed
        '404':
          description: The requested inititative was not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InitiativeErrorDTO'
              example:
                code: "INITIATIVE_NOT_FOUND"
                message: "Initiative not found"
        '429':
          description: Too many Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InitiativeErrorDTO'
              example:
                code: "INITIATIVE_TOO_MANY_REQUESTS"
                message: "Too many requests"
        '500':
          description: Server ERROR
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InitiativeErrorDTO'
              example:
                code: "INITIATIVE_GENERIC_ERROR"
                message: "Application error"
  '/organization/{organizationId}/initiative/{initiativeId}/beneficiary/{iban}':
    get:
      tags:
        - beneficiary
      summary: "ENG: Returns the detail of the IBAN associated to the initiative by the citizen - IT: Mostra il dettaglio dell'IBAN associato all'iniziativa dal cittadino"
      operationId: getIban
      parameters:
        - name: Fiscal-Code
          in: header
          description: "ENG: Citizen fiscal code - IT: Codice fiscale del cittadino"
          schema:
            type: string
            example: Fiscal-Code
          required: true
        - name: iban
          in: path
          description: "ENG: The citizen IBAN - IT: L'IBAN del cittadino"
          required: true
          schema:
            type: string
        - name: organizationId
          in: path
          description: "ENG: The ID of the organization - IT: L'ID dell'organizzazione"
          required: true
          schema:
            type: string
        - name: initiativeId
          in: path
          description: "ENG: The ID of the initiative - IT: L'ID dell'iniziativa"
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IbanDTO'
        '401':
          description: Authentication failed
        '404':
          description: The requested ID was not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IbanErrorDTO'
              example:
                code: "IBAN_NOT_FOUND"
                message: "Iban not found"
        '429':
          description: Too many Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IbanErrorDTO'
              example:
                code: "IBAN_TOO_MANY_REQUESTS"
                message: "Too many requests"
        '500':
          description: Server ERROR
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IbanErrorDTO'
              example:
                code: "IBAN_GENERIC_ERROR"
                message: "Application error"
  '/organization/{organizationId}/initiative/{initiativeId}/beneficiary/timeline':
    get:
      tags:
        - beneficiary
      summary: "ENG: Returns the list of transactions and operations of a citizen on initiative sorted by date (newest->oldest) - IT: Mostra una lista di transazioni ed operazioni di un cittadino su un iniziativa ordinate per data"
      operationId: getTimeline
      parameters:
        - name: Fiscal-Code
          in: header
          description: "ENG: Citizen fiscal code - IT: Codice fiscale del cittadino"
          schema:
            type: string
            example: Fiscal-Code
          required: true
        - name: organizationId
          in: path
          description: "ENG: The ID of the organization - IT: L'ID dell'organizzazione"
          required: true
          schema:
            type: string
        - name: initiativeId
          in: path
          description: "ENG: The ID of the initiative - IT: L'ID dell'iniziativa"
          required: true
          schema:
            type: string
        - name: operationType
          in: query
          description: "ENG: Operation type filter - IT: Filtro sul tipo di operazione"
          schema:
            type: string
        - name: dateFrom
          in: query
          description: "ENG: Start date - IT: Data iniziale dell'intervallo temporale entro cui recuperare le operazioni"
          required: false
          schema:
            type: string
            format: date-time
        - name: dateTo
          in: query
          description: "ENG: End date - IT: Data finale superiore dell'intervallo temporale entro cui recuperare le operazioni"
          required: false
          schema:
            type: string
            format: date-time
        - name: page
          in: query
          description: "ENG: The number of the page - IT: Il numero della pagina"
          schema:
            type: integer
        - name: size
          in: query
          description: 'ENG: Number of items, default 3 - max 10 - IT: Numero di risultati, il default è 3 - il massimo è 10'
          schema:
            type: integer
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TimelineDTO'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TimelineErrorDTO'
              example:
                code: "TIMELINE_INVALID_REQUEST"
                message: "Something went wrong handling request"
        '401':
          description: Authentication failed
        '404':
          description: The requested ID was not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TimelineErrorDTO'
              example:
                code: "TIMELINE_USER_NOT_FOUND"
                message: "Timeline for the current user not found"
        '429':
          description: Too many Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TimelineErrorDTO'
              example:
                code: "TIMELINE_TOO_MANY_REQUESTS"
                message: "Too many requests"
        '500':
          description: Server ERROR
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TimelineErrorDTO'
              example:
                code: "TIMELINE_GENERIC_ERROR"
                message: "Application error"
  '/organization/{organizationId}/initiative/{initiativeId}/beneficiary/timeline/{operationId}':
    get:
      tags:
        - beneficiary
      summary: "ENG: Returns the detail of a transaction - IT: Mostra il dettaglio di una transazione"
      operationId: getTimelineDetail
      parameters:
        - name: Fiscal-Code
          in: header
          description: "ENG: Citizen fiscal code - IT: Codice fiscale del cittadino"
          schema:
            type: string
            example: Fiscal-Code
          required: true
        - name: organizationId
          in: path
          description: "ENG: The ID of the organization - IT: L'ID dell'organizzazione"
          required: true
          schema:
            type: string
        - name: initiativeId
          in: path
          description: "ENG: The ID of the initiative - IT: L'ID dell'iniziativa"
          required: true
          schema:
            type: string
        - name: operationId
          in: path
          description: "ENG: The operation ID - IT: L'ID dell'operazione"
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OperationDTO'
        '401':
          description: Authentication failed
        '404':
          description: The requested ID was not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TimelineErrorDTO'
              example:
                code: "TIMELINE_DETAIL_NOT_FOUND"
                message: "Detail of Timeline not found"
        '429':
          description: Too many Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TimelineErrorDTO'
              example:
                code: "TIMELINE_TOO_MANY_REQUESTS"
                message: "Too many requests"
        '500':
          description: Server ERROR
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TimelineErrorDTO'
              example:
                code: "TIMELINE_GENERIC_ERROR"
                message: "Application error"
  '/organization/{organizationId}/initiative/{initiativeId}/beneficiary/wallet':
    get:
      tags:
        - beneficiary
      summary: "ENG: Returns the wallet detail of a citizen on an active initiative - IT: Mostra il dettaglio del portafoglio del cittadino su un iniziativa attiva"
      operationId: getWalletDetail
      parameters:
        - name: Fiscal-Code
          in: header
          description: "ENG: Citizen fiscal code - IT: Codice fiscale del cittadino"
          schema:
            type: string
            example: Fiscal-Code
          required: true
        - name: organizationId
          in: path
          description: "ENG: The ID of the organization - IT: L'ID dell'organizzazione"
          required: true
          schema:
            type: string
        - name: initiativeId
          in: path
          description: "ENG: The ID of the initiative - IT: L'ID dell'iniziativa"
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InitiativeDTO'
        '401':
          description: Authentication failed
        '404':
          description: The requested resource was not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WalletErrorDTO'
              example:
                code: "WALLET_USER_NOT_ONBOARDED"
                message: "User not onboarded on this initiative"
        '429':
          description: Too many Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WalletErrorDTO'
              example:
                code: "WALLET_TOO_MANY_REQUESTS"
                message: "Too many requests"
        '500':
          description: Server ERROR
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WalletErrorDTO'
              example:
                code: "WALLET_GENERIC_ERROR"
                message: "Application error"
  '/organization/{organizationId}/initiative/{initiativeId}/beneficiary/instruments':
    get:
      tags:
        - beneficiary
      summary: "ENG: Returns the list of payment instruments associated to the initiative by the citizen - IT: Lista degli strumenti di pagamento associati dal cittadino sull'iniziativa"
      operationId: getInstrumentList
      parameters:
        - name: Fiscal-Code
          in: header
          description: "ENG: Citizen fiscal code - IT: Codice fiscale del cittadino"
          schema:
            type: string
            example: Fiscal-Code
          required: true
        - name: organizationId
          in: path
          description: "ENG: The ID of the organization - IT: L'ID dell'organizzazione"
          required: true
          schema:
            type: string
        - name: initiativeId
          in: path
          description: "ENG: The ID of the initiative - IT: L'ID dell'iniziativa"
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InstrumentListDTO'
        '401':
          description: Authentication failed
        '429':
          description: Too many Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaymentInstrumentErrorDTO'
              example:
                code: "PAYMENT_INSTRUMENT_TOO_MANY_REQUESTS"
                message: "Too many requests"
        '500':
          description: Server ERROR
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaymentInstrumentErrorDTO'
              example:
                code: "PAYMENT_INSTRUMENT_GENERIC_ERROR"
                message: "Something gone wrong while send RTD instrument notify"
  '/organization/{organizationId}/initiative/{initiativeId}/beneficiary/family':
    get:
      tags:
        - beneficiary
      summary: "ENG: Returns the family unit composition - IT: Restituisce la composizione del nucleo familiare"
      operationId: getFamilyComposition
      parameters:
        - name: Fiscal-Code
          in: header
          description: "ENG: Citizen fiscal code - IT: Codice fiscale del cittadino"
          schema:
            type: string
            example: Fiscal-Code
          required: true
        - name: organizationId
          in: path
          description: "ENG: The ID of the organization - IT: L'ID dell'organizzazione"
          required: true
          schema:
            type: string
        - name: initiativeId
          in: path
          description: "ENG: The ID of the initiative - IT: L'ID dell'iniziativa"
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Get successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FamilyUnitCompositionDTO'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OnboardingErrorDTO'
              example:
                code: "ONBOARDING_INVALID_REQUEST"
                message: "Something went wrong handling the request"
        '401':
          description: Authentication failed
        '404':
          description: The requested resource was not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OnboardingErrorDTO'
              example:
                code: "ONBOARDING_USER_NOT_ONBOARDED"
                message: "The current user is not onboarded on initiative [%s]"
        '429':
          description: Too many Requests
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OnboardingErrorDTO'
              example:
                code: "ONBOARDING_TOO_MANY_REQUESTS"
                message: "Too many requests"
        '500':
          description: Server ERROR
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OnboardingErrorDTO'
              example:
                code: "ONBOARDING_GENERIC_ERROR"
                message: "An error occurred in the microservice onboarding"

  /organization/{organizationId}/initiative/{initiativeId}/onboardings:
    get:
      tags:
        - initiative-onboarding
      summary: "ENG: Returns the onboardings status - IT: Mostra gli stati dell'onboarding"
      description: "ENG: Returns the onboardings status - IT: Mostra gli stati dell'onboarding"
      operationId: getOnboardingStatus
      parameters:
        - name: initiativeId
          in: path
          description: "ENG: The ID of the initiative - IT: L'ID dell'iniziativa"
          required: true
          schema:
            type: string
        - name: organizationId
          in: path
          description: "ENG: The ID of the organization - IT: L'ID dell'organizzazione"
          required: true
          schema:
            type: string
        - name: page
          in: query
          description: "ENG: The number of the page - IT: Il numero della pagina"
          required: false
          schema:
            type: integer
            format: int32
        - name: size
          in: query
          required: false
          schema:
            type: integer
            format: int32
        - name: sort
          in: query
          description: "ENG: Sorting order of the result - IT: Ordinamento del risultato"
          required: false
          schema:
            type: string
        - name: beneficiary
          in: query
          description: "ENG: The fiscal code - IT: Il codice fiscale"
          required: false
          schema:
            type: string
        - name: dateFrom
          in: query
          description: "ENG: Start date - IT: Data iniziale dell'intervallo temporale entro cui recuperare gli stati dell'onboarding"
          required: false
          schema:
            type: string
        - name: dateTo
          in: query
          description: "ENG: End date - IT: Data finale superiore dell'intervallo temporale entro cui recuperare gli stati dell'onbaording"
          required: false
          schema:
            type: string
        - name: state
          in: query
          description: "ENG: Onboarding state - IT: Stato dell'onboarding"
          required: false
          schema:
            type: string
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OnboardingDTO'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InitiativeErrorDTO'
              example:
                code: "INITIATIVE_INVALID_REQUEST"
                message: "Something went wrong handling the request"
        '401':
          description: Authentication failed
        '404':
          description: The requested initiative was not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InitiativeErrorDTO'
              example:
                code: "INITIATIVE_NOT_FOUND"
                message: "Initiative not found"
        '429':
          description: Too many Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InitiativeErrorDTO'
              example:
                code: "INITIATIVE_TOO_MANY_REQUESTS"
                message: "Too many requests"
        '500':
          description: Server ERROR
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InitiativeErrorDTO'
              example:
                code: "INITIATIVE_GENERIC_ERROR"
                message: "Application error"
  /organization/{organizationId}/initiative/{initiativeId}/onboarding/status:
    get:
      tags:
        - initiative-onboarding
      summary: "ENG: Returns the actual onboarding status - IT: Mostra lo stato attuale dell'onboarding"
      operationId: getBeneficiaryOnboardingStatus
      parameters:
        - name: Fiscal-Code
          in: header
          description: "ENG: Citizen fiscal code - IT: Codice fiscale del cittadino"
          schema:
            type: string
          required: true
        - name: initiativeId
          in: path
          description: "ENG: The ID of the initiative - IT: L'ID dell'iniziativa"
          required: true
          schema:
            type: string
        - name: organizationId
          in: path
          description: "ENG: The ID of the organization - IT: L'ID dell'organizzazione"
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Check successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OnboardingStatusDTO'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OnboardingErrorDTO'
              example:
                code: "ONBOARDING_INVALID_REQUEST"
                message: "Something went wrong handling the request"
        '401':
          description: Authentication failed
        '404':
          description: The requested resource was not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OnboardingErrorDTO'
              example:
                code: "ONBOARDING_USER_NOT_ONBOARDED"
                message: "The current user is not onboarded on initiative [%s]"
        '500':
          description: Server ERROR
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OnboardingErrorDTO'
              example:
                code: "ONBOARDING_GENERIC_ERROR"
                message: "An error occurred in the microservice admissibility"
  /organization/{organizationId}/initiative/{initiativeId}/ranking/exports:
    get:
      tags:
        - initiative-onboarding
      summary: "ENG: Return a pageable list of Citizen ranking status for a specific Intiative by using filters - IT: Mostra una lista paginata dello stato dei cittadini in graduatoria utilizzando dei filtri"
      description: "ENG: Return a pageable list of Citizen ranking status for a specific Intiative by using filters - IT: Mostra una lista paginata dello stato dei cittadini in graduatoria utilizzando dei filtri"
      operationId: getInitiativeOnboardingRankingStatusPaged
      parameters:
        - name: initiativeId
          in: path
          description: "ENG: The ID of the initiative - IT: L'ID dell'iniziativa"
          required: true
          schema:
            type: string
        - name: organizationId
          in: path
          description: "ENG: The ID of the organization - IT: L'ID dell'organizzazione"
          required: true
          schema:
            type: string
        - name: page
          in: query
          description: "ENG: The number of the page - IT: Il numero della pagina"
          required: false
          schema:
            type: integer
            format: int32
        - name: size
          in: query
          required: false
          schema:
            type: integer
            format: int32
        - name: sort
          in: query
          description: "ENG: Sorting order of the result - IT: Ordinamento del risultato"
          required: false
          schema:
            type: string
        - name: beneficiary
          in: query
          description: "ENG: The fiscal code - IT: Il codice fiscale"
          required: false
          schema:
            type: string
        - name: state
          in: query
          description: "ENG: Onboarding state - IT: Stato dell'onboarding"
          required: false
          schema:
            type: string
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageOnboardingRankingsDTO'
        '401':
          description: Authentication failed
        '404':
          description: The requested initiative was not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InitiativeErrorDTO'
              example:
                code: "INITIATIVE_NOT_FOUND"
                message: "Initiative not found"
        '429':
          description: Too many Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InitiativeErrorDTO'
              example:
                code: "INITIATIVE_TOO_MANY_REQUESTS"
                message: "Too many requests"
        '500':
          description: Server ERROR
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InitiativeErrorDTO'
              example:
                code: "INITIATIVE_GENERIC_ERROR"
                message: "Application error"
  /organization/{organizationId}/initiative/{initiativeId}/ranking/exports/{filename}:
    get:
      tags:
        - initiative-onboarding
      summary: "ENG: Return the requested filename containing the list of Citizen ranking status for a specific Intiative - IT: Restitusce un file contenente la lista degli stati dei cittadini in graduatoria per una specifica iniziativa"
      description: "ENG: Return the requested filename containing the list of Citizen ranking status for a specific Intiative - IT: Restitusce un file contenente la lista degli stati dei cittadini in graduatoria per una specifica iniziativa"
      operationId: getRankingFileDownload
      parameters:
        - name: initiativeId
          in: path
          description: "ENG: The ID of the initiative - IT: L'ID dell'iniziativa"
          required: true
          style: simple
          schema:
            type: string
        - name: organizationId
          in: path
          description: "ENG: The ID of the organization - IT: L'ID dell'organizzazione"
          required: true
          schema:
            type: string
        - name: filename
          in: path
          description: "ENG: File name - IT: Nome del file"
          required: true
          style: simple
          schema:
            type: string
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SasToken'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorDTO'
        '401':
          description: Authentication failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorDTO'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorDTO'
        '404':
          description: The requested ID was not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorDTO'
        '429':
          description: Too many Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorDTO'
        '500':
          description: Server ERROR
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorDTO'
  /organization/{organizationId}/initiative/{initiativeId}/reward/exports:
    get:
      tags:
        - initiative-reward
      summary: "ENG: Return a pageable list of reward exports notification for a specific Initiative by using filters - IT: Mostra una lista paginata di file di rimborsi per la specifica iniziativa usando dei filtri"
      operationId: getRewardNotificationExportsPaged
      parameters:
        - name: initiativeId
          in: path
          description: "ENG: The ID of the initiative - IT: L'ID dell'iniziativa"
          required: true
          style: simple
          schema:
            type: string
        - name: organizationId
          in: path
          description: "ENG: The ID of the organization - IT: L'ID dell'organizzazione"
          required: true
          schema:
            type: string
        - name: page
          in: query
          description: "ENG: The number of the page - IT: Il numero della pagina"
          required: false
          style: form
          schema:
            type: integer
            format: int32
        - name: size
          in: query
          required: false
          style: form
          schema:
            type: integer
            format: int32
        - name: sort
          in: query
          description: "ENG: Sorting order of the result - IT: Ordinamento del risultato"
          required: false
          style: form
          schema:
            type: string
        - name: status
          in: query
          required: false
          style: form
          schema:
            type: string
        - name: notificationDateFrom
          in: query
          required: false
          style: form
          schema:
            type: string
            format: date
        - name: notificationDateTo
          in: query
          required: false
          style: form
          schema:
            type: string
            format: date
      responses:
        '200':
          description: OK
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/PageRewardExportsDTO'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorDTO'
        '401':
          description: Authentication failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorDTO'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorDTO'
        '404':
          description: The requested ID was not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorDTO'
        '429':
          description: Too many Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorDTO'
        '500':
          description: Server ERROR
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorDTO'
  /organization/{organizationId}/initiative/{initiativeId}/reward/imports:
    get:
      tags:
        - initiative-reward
      summary: "ENG: Return a pageable list of reward imports notification for a specific Initiative by using filters - IT: Mostra una lista paginata di file di esiti su una specifica iniziativa utilizzando dei filtri"
      operationId: getRewardNotificationImportsPaged
      parameters:
        - name: initiativeId
          in: path
          description: "ENG: The ID of the initiative - IT: L'ID dell'iniziativa"
          required: true
          style: simple
          schema:
            type: string
        - name: organizationId
          in: path
          description: "ENG: The ID of the organization - IT: L'ID dell'organizzazione"
          required: true
          schema:
            type: string
        - name: page
          in: query
          description: "ENG: The number of the page - IT: Il numero della pagina"
          required: false
          style: form
          schema:
            type: integer
            format: int32
        - name: size
          in: query
          required: false
          style: form
          schema:
            type: integer
            format: int32
        - name: sort
          in: query
          description: "ENG: Sorting order of the result - IT: Ordinamento del risultato"
          required: false
          style: form
          schema:
            type: string
        - name: status
          in: query
          required: false
          style: form
          schema:
            type: string
        - name: elabDateFrom
          in: query
          required: false
          style: form
          schema:
            type: string
            format: date-time
        - name: elabDateTo
          in: query
          required: false
          style: form
          schema:
            type: string
            format: date-time
      responses:
        '200':
          description: OK
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/PageRewardImportsDTO'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorDTO'
        '401':
          description: Authentication failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorDTO'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorDTO'
        '404':
          description: The requested ID was not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorDTO'
        '409':
          description: Conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorDTO'
        '429':
          description: Too many Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorDTO'
        '500':
          description: Server ERROR
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorDTO'

  /organization/{organizationId}/initiative/{initiativeId}/reward/exports/{filename}:
    get:
      tags:
        - initiative-reward
      summary: "ENG: Return the requested filename - IT: Restituisce il file richiesto"
      operationId: getRewardFileDownload
      parameters:
        - name: initiativeId
          in: path
          description: "ENG: The ID of the initiative - IT: L'ID dell'iniziativa"
          required: true
          style: simple
          schema:
            type: string
        - name: organizationId
          in: path
          description: "ENG: The ID of the organization - IT: L'ID dell'organizzazione"
          required: true
          schema:
            type: string
        - name: filename
          in: path
          description: filename
          required: true
          style: simple
          schema:
            type: string
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SasToken'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorDTO'
        '404':
          description: The requested ID was not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorDTO'
        '429':
          description: Too many Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorDTO'
        '500':
          description: Server ERROR
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorDTO'

  /organization/{organizationId}/initiative/{initiativeId}/reward/import/{filename}/errors:
    get:
      tags:
        - initiative-reward
      summary: "ENG: Get dispositive file errors - IT: Mostra il file degli errori"
      operationId: getDispFileErrors
      parameters:
        - name: initiativeId
          in: path
          description: "ENG: The ID of the initiative - IT: L'ID dell'iniziativa"
          required: true
          style: simple
          schema:
            type: string
        - name: organizationId
          in: path
          description: "ENG: The ID of the organization - IT: L'ID dell'organizzazione"
          required: true
          schema:
            type: string
        - name: filename
          in: path
          description: filename
          required: true
          style: simple
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CsvDTO'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorDTO'
        '401':
          description: Authentication failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorDTO'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorDTO'
        '404':
          description: The requested ID was not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorDTO'
        '429':
          description: Too many Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorDTO'
        '500':
          description: Server ERROR
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorDTO'
  /organization/{organizationId}/initiative/{initiativeId}/reward/exports/{exportId}/summary:
    get:
      tags:
        - initiative-reward
      summary: "ENG: Get the export summary data - IT: Mostra un resoconto del file di rimborso"
      operationId: getExportSummary
      parameters:
        - name: initiativeId
          in: path
          description: "ENG: The ID of the initiative - IT: L'ID dell'iniziativa"
          required: true
          style: simple
          schema:
            type: string
        - name: organizationId
          in: path
          description: "ENG: The ID of the organization - IT: L'ID dell'organizzazione"
          required: true
          schema:
            type: string
        - name: exportId
          in: path
          description: exportId
          required: true
          style: simple
          schema:
            type: string
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                '$ref': '#/components/schemas/ExportSummaryDTO'
              example:
                createDate: 2018-10-13
                status: EXPORTED
                successPercentage: '20'
                totalAmountCents: 100
                totalRefundedAmountCents: 10
                totalRefunds: 20
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorDTO'
        '401':
          description: Authentication failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorDTO'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorDTO'
        '404':
          description: The requested ID was not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorDTO'
        '429':
          description: Too many Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorDTO'
        '500':
          description: Server ERROR
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorDTO'
  /organization/{organizationId}/initiative/{initiativeId}/reward/exports/{exportId}/refunds:
    get:
      tags:
        - initiative-reward
      summary: "ENG: Get the refunds list in pages - IT: Mostra la lista dei rimborsi paginata"
      operationId: getExportRefundsListPaged
      parameters:
        - name: initiativeId
          in: path
          description: "ENG: The ID of the initiative - IT: L'ID dell'iniziativa"
          required: true
          style: simple
          schema:
            type: string
        - name: organizationId
          in: path
          description: "ENG: The ID of the organization - IT: L'ID dell'organizzazione"
          required: true
          schema:
            type: string
        - name: exportId
          in: path
          description: exportId
          required: true
          style: simple
          schema:
            type: string
        - name: page
          in: query
          description: "ENG: The number of the page - IT: Il numero della pagina"
          required: false
          schema:
            type: integer
            format: int32
        - name: size
          in: query
          required: false
          schema:
            type: integer
            format: int32
        - name: sort
          in: query
          description: "ENG: Sorting order of the result - IT: Ordinamento del risultato"
          required: false
          schema:
            type: string
        - name: cro
          in: query
          required: false
          schema:
            type: string
        - name: status
          in: query
          required: false
          schema:
            type: string
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                '$ref': '#/components/schemas/ExportListDTO'
              example:
                content:
                  - id: '1234'
                    iban: IT60X0542811101000000123456
                    amountCents: 1000
                    status: COMPLETED_OK
                  - id: '5678'
                    iban: IT60X0542811101000000123456
                    amountCents: 1000
                    status: COMPLETED_OK
                  - id: '9101'
                    iban: IT60X0542811101000000123456
                    amountCents: 1000
                    status: COMPLETED_OK
                  - id: '1121'
                    iban: IT60X0542811101000000123456
                    amountCents: 1000
                    status: COMPLETED_OK
                  - id: '3141'
                    iban: IT60X0542811101000000123456
                    amountCents: 1000
                    status: COMPLETED_KO
                  - id: '5161'
                    iban: IT60X0542811101000000123456
                    amountCents: 1000
                    status: COMPLETED_KO
                  - id: '7181'
                    iban: IT60X0542811101000000123456
                    amountCents: 1000
                    status: COMPLETED_KO
                  - id: '9200'
                    iban: IT60X0542811101000000123456
                    amountCents: 1000
                    status: EXPORTED
                  - id: '1222'
                    iban: IT60X0542811101000000123456
                    amountCents: 1000
                    status: EXPORTED
                  - id: '3242'
                    iban: IT60X0542811101000000123456
                    amountCents: 1000
                    status: EXPORTED
                pageNo: 0
                pageSize: 10
                totalElements: 10
                totalPages: 1
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorDTO'
        '401':
          description: Authentication failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorDTO'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorDTO'
        '404':
          description: The requested ID was not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorDTO'
        '429':
          description: Too many Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorDTO'
        '500':
          description: Server ERROR
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorDTO'
  /organization/{organizationId}/initiative/{initiativeId}/reward/exports/event/{eventId}:
    get:
      tags:
        - initiative-reward
      summary: "ENG: Return the refund detail - IT: Mostra i dettagli del rimborso"
      operationId: getRefundDetail
      parameters:
        - name: initiativeId
          in: path
          description: "ENG: The ID of the initiative - IT: L'ID dell'iniziativa"
          required: true
          style: simple
          schema:
            type: string
        - name: organizationId
          in: path
          description: "ENG: The ID of the organization - IT: L'ID dell'organizzazione"
          required: true
          schema:
            type: string
        - name: eventId
          in: path
          description: "ENG: Event ID - IT: Identificativo dell'evento"
          required: true
          style: simple
          schema:
            type: string
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                '$ref': '#/components/schemas/RefundDetailDTO'
              example:
                amountCents: 1000
                endDate: 2022-10-15
                fiscalCode: RSSMRA94C31F205K
                iban: IT60X0542811101000000123456
                userNotificationDate: 2022-12-13
                refundType: ORDINARY
                transferDate: 2022-12-13
                startDate: 2022-10-14
                status: COMPLETED_OK
                cro: '12345678901'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorDTO'
        '401':
          description: Authentication failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorDTO'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorDTO'
        '404':
          description: The requested ID was not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorDTO'
        '429':
          description: Too many Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorDTO'
        '500':
          description: Server ERROR
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorDTO'
  /organization/{organizationId}/initiative/{initiativeId}/merchants:
    get:
      tags:
        - merchant
      summary: "ENG: Returns the merchants list - IT: Ritorna la ista degli esercenti"
      description: "ENG: Returns the merchants list <br> IT: Lista degli esercenti"
      operationId: getMerchantList
      parameters:
        - name: organizationId
          in: path
          description: "ENG: The ID of the organization - IT: L'ID dell'organizzazione"
          required: true
          schema:
            type: string
        - name: initiativeId
          in: path
          description: "ENG: The initiative ID - IT: L'ID dell'iniziativa"
          required: true
          schema:
            type: string
        - name: page
          in: query
          description: "ENG: The number of the page - IT: Il numero della pagina"
          required: false
          schema:
            type: integer
            format: int32
        - name: size
          in: query
          description: "ENG: Number of items, default 10 - IT: Numero di risultati, il default è 10"
          required: false
          schema:
            type: integer
            format: int32
        - name: sort
          in: query
          description: "ENG: Sorting order of the result - IT: Ordinamento del risultato"
          required: false
          schema:
            type: string
        - name: fiscalCode
          in: query
          description: "ENG: Citizen fiscal code- IT: Codice fiscale del cittadino"
          required: false
          schema:
            type: string
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MerchantListDTO'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MerchantErrorDTO'
              example:
                code: MERCHANT_INVALID_REQUEST
                message: Something went wrong handling request
        '401':
          description: Authentication failed
        '429':
          description: Too many Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MerchantErrorDTO'
              example:
                code: MERCHANT_TOO_MANY_REQUESTS
                message: Too many requests
        '500':
          description: Server ERROR
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MerchantErrorDTO'
              example:
                code: MERCHANT_GENERIC_ERROR
                message: An error occurred during file reading
  /organization/{organizationId}/initiative/{initiativeId}/merchant/{merchantId}:
    get:
      tags:
        - merchant
      summary: "ENG: Returns the merchant detail on initiative - IT: Ritorna il dettaglio dell' esercente sull'iniziativa"
      description: "ENG: Returns the merchant detail on initiative <br> IT: Dettaglio dell' esercente sull'iniziativa"
      operationId: getMerchantDetail
      parameters:
        - name: organizationId
          in: path
          description: "ENG: The ID of the organization - IT: L'ID dell'organizzazione"
          required: true
          schema:
            type: string
        - name: initiativeId
          in: path
          description: "ENG: The initiative ID - IT: L'ID dell'iniziativa"
          required: true
          schema:
            type: string
        - name: merchantId
          in: path
          description: "ENG: The merchant ID - ID: L'ID dell'esercente"
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MerchantDetailDTO'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MerchantErrorDTO'
              example:
                code: MERCHANT_INVALID_REQUEST
                message: Something went wrong handling request
        '401':
          description: Authentication failed
        '404':
          description: The requested ID was not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MerchantErrorDTO'
              example:
                code: MERCHANT_NOT_ONBOARDED
                message: The current merchant is not onboarded on initiative
        '429':
          description: Too many Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MerchantErrorDTO'
              example:
                code: MERCHANT_TOO_MANY_REQUESTS
                message: Too many requests
        '500':
          description: Server ERROR
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MerchantErrorDTO'
              example:
                code: MERCHANT_GENERIC_ERROR
                message: An error occurred during file reading
  /organization/{organizationId}/initiative/{initiativeId}/merchant/{merchantId}/statistics:
    get:
      tags:
        - merchant
      summary: "ENG: Returns the merchant statistics on the initiative - IT: Ritorna le statistiche dell'esercente sull'iniziativa"
      description: "ENG: Returns the merchant statistics on the initiative <br> IT: Ritorna le statistiche dell'esercente sull'iniziativa"
      operationId: getMerchantInitiativeStatistics
      parameters:
        - name: organizationId
          in: path
          description: "ENG: The ID of the organization - IT: L'ID dell'organizzazione"
          required: true
          schema:
            type: string
        - name: merchantId
          in: path
          description: "ENG: The merchant ID - ID: L'ID dell'esercente"
          required: true
          schema:
            type: string
        - name: initiativeId
          in: path
          description: "ENG: The initiative ID - IT: L'ID dell'iniziativa"
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MerchantStatisticsDTO'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StatisticsErrorDTO'
              example:
                code: "STATISTICS_INVALID_REQUEST"
                message: "Something went wrong handling request"
        '401':
          description: Authentication failed
        '404':
          description: The requested ID was not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StatisticsErrorDTO'
              example:
                code: "STATISTICS_NOT_FOUND"
                message: "Stats not found"
        '429':
          description: Too many Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StatisticsErrorDTO'
              example:
                code: "STATISTICS_MANAGER_TOO_MANY_REQUESTS"
                message: "Too many requests"
        '500':
          description: Server ERROR
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StatisticsErrorDTO'
              example:
                code: "STATISTICS_MANAGER_GENERIC_ERROR"
                message: "Application error"
  /organization/{organizationId}/initiative/{initiativeId}/merchant/{merchantId}/transactions:
    get:
      tags:
        - merchant
      summary: "ENG: Returns the list of in progress transactions associated to a merchant - IT: Ritorna la lista delle transazioni in corso associate ad un esercente"
      description: "ENG: Returns the list of in progress transactions associated to a merchant <br> IT: Ritorna la lista delle transazioni in corso associate ad un esercente"
      operationId: getMerchantTransactions
      parameters:
        - name: organizationId
          in: path
          description: "ENG: The ID of the organization - IT: L'ID dell'organizzazione"
          required: true
          schema:
            type: string
        - name: merchantId
          in: path
          description: "ENG: The merchant ID - ID: L'ID dell'esercente"
          required: true
          schema:
            type: string
        - name: initiativeId
          in: path
          description: "ENG: The initiative ID - IT: L'ID dell'iniziativa"
          required: true
          schema:
            type: string
        - name: page
          in: query
          description: "ENG: The number of the page - IT: Il numero della pagina"
          required: false
          schema:
            type: integer
            format: int32
        - name: size
          in: query
          description: 'ENG: Number of items, default 10 - IT: Numero di risultati, il default è 10'
          required: false
          schema:
            type: integer
            format: int32
        - name: fiscalCode
          in: query
          description: "ENG: Citizen fiscal code- IT: Codice fiscale del cittadino"
          required: false
          schema:
            type: string
        - name: status
          in: query
          description: "ENG: Transaction status - IT: Stato della transazione"
          required: false
          schema:
            type: string
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MerchantTransactionsListDTO'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TransactionErrorDTO'
              example:
                code: "PAYMENT_INVALID_REQUEST"
                message: "Something went wrong handling the request"
        '401':
          description: Autentication failed
        '429':
          description: Too many requests
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TransactionErrorDTO'
              example:
                code: "PAYMENT_TOO_MANY_REQUESTS"
                message: "Too many requests"
        '500':
          description: Generic error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TransactionErrorDTO'
              example:
                code: "PAYMENT_GENERIC_ERROR"
                message: "Application error"
  /organization/{organizationId}/initiative/{initiativeId}/merchant/{merchantId}/transactions/processed:
    get:
      tags:
        - merchant
      summary: "ENG: Returns the list of processed transactions associated to a merchant - IT: Ritorna la lista delle transazioni processate associate ad un esercente"
      description: "ENG: Returns the list of processed transactions associated to a merchant <br> IT: Ritorna la lista delle transazioni processate associate ad un esercente"
      operationId: getMerchantTransactionsProcessed
      parameters:
        - name: organizationId
          in: path
          description: "ENG: The ID of the organization - IT: L'ID dell'organizzazione"
          required: true
          schema:
            type: string
        - name: merchantId
          in: path
          description: "ENG: The merchant ID - IT: L'ID dell'esercente"
          required: true
          schema:
            type: string
        - name: initiativeId
          in: path
          description: "ENG: The initiative ID - IT: L'ID dell'iniziativa"
          required: true
          schema:
            type: string
        - name: page
          in: query
          description: "ENG: The number of the page - IT: Il numero della pagina"
          required: false
          schema:
            type: integer
            format: int32
        - name: size
          in: query
          description: "ENG: Number of items, default 10 - IT: Numero di risultati, il default è 10"
          required: false
          schema:
            type: integer
            format: int32
        - name: fiscalCode
          in: query
          description: "ENG: Citizen fiscal code - IT: Codice fiscale del cittadino"
          required: false
          schema:
            type: string
        - name: status
          in: query
          description: "ENG: Transaction status - IT: Stato della tansazione"
          required: false
          schema:
            type: string
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MerchantTransactionsProcessedListDTO'
        '401':
          description: Autentication failed
        '404':
          description: Merchant not found
        '429':
          description: Too many requests
        '500':
          description: Server error
components:
  schemas:
    SasToken:
      type: object
      properties:
        sas:
          type: string
    InitiativeAdditionalDTO:
      type: object
      properties:
        serviceIO:
          type: boolean
          description: "ENG: Indicates that the initiative is on IO - IT: Indica che l'iniziativa viene erogata su IO"
        serviceId:
          type: string
          description: "ENG: The ID of the service - IT: L'ID del servizio"
        serviceName:
          type: string
          description: "ENG: The name of the service - IT: Il nome del servizio"
        serviceScope:
          enum:
            - LOCAL
            - NATIONAL
          type: string
          description: "ENG: The service scope of the initiative - IT: L'area di competenza dell'iniziativa"
        description:
          type: string
          description: "ENG: The description of the service - IT: La descrizione del servizio"
        privacyLink:
          type: string
          description: "ENG: Privacy policy link - IT: Link informativa privacy"
        tcLink:
          type: string
          description: "ENG: T&C clauses link - IT: Link termini e condizioni d'uso"
        channels:
          $ref: '#/components/schemas/ChannelArrayDTO'
        logoFileName:
          type: string
          description: "ENG: The file name of the logo - IT: Il nome file del logo"
        logoURL:
          type: string
          description: "ENG: The URL logo related to the initiative  - IT: L'URL del logo relativo all'iniziativa"
        logoUploadDate:
          type: string
          format: date-time
          description: "ENG: The date-time of logo's upload  - IT: Data-ora dell'inserimento del logo"
    InitiativeGeneralDTO:
      type: object
      properties:
        budget:
          type: number
          description: "ENG: The budget for the initiative - IT: Il budget per l'iniziativa"
        beneficiaryType:
          enum:
            - PF
            - PG
            - NF
          type: string
          description: "ENG: The type of beneficiary able on this initiative - IT: Il tipo di beneficiario abilitato per questa iniziativa"
        familyUnitComposition:
          enum:
            - INPS
            - ANPR
          type: string
          description: "ENG: Family unit composition provided by: INPS: Family unit composition on ISEE, ANPR: Registry family status,  - IT: Composizione del nucleo familiare fornita da: INPS: Nucleo familiare su ISEE, ANPR: Stato di famiglia anagrafica"
        beneficiaryKnown:
          type: boolean
          description: "ENG: Indicates if a list of fiscal code is uploaded or not - IT: Indica se verrà caricata una lista di codifi fiscali conosciuti oppure no"
        beneficiaryBudget:
          type: number
          description: "ENG: The budget for single beneficiary - IT: Budget per singolo beneficiario"
        startDate:
          type: string
          description: "ENG: Start date of the initiative - IT: Data di inizio dell'iniziativa"
          format: date
          example: '2022-01-30'
        endDate:
          type: string
          description: "ENG: End date of the initiative - IT: Data di fine dell'iniziativa"
          format: date
          example: '2022-01-30'
        rankingStartDate:
          type: string
          description: "ENG: Start date of the expenditure related to the initiative - IT: Data di inizio spesa relativa all'iniziativa"
          format: date
          example: '2022-01-30'
        rankingEndDate:
          type: string
          description: "ENG: End date of the expenditure related to the initiative - IT: Data di fine spesa relativa all'iniziativa"
          format: date
          example: '2022-01-30'
        rankingEnabled:
          type: boolean
          description: "ENG: Indicates if the initiative type is with ranking or not - IT: Indica se il tipo di iniziativa è con graduatoria oppure no"
        descriptionMap:
          $ref: '#/components/schemas/DescriptionMap'
    AutomatedCriteriaDTO:
      type: object
      properties:
        authority:
          type: string
          description: "ENG: The organization that provide the information - IT: L'ente che fornisce l'informazione"
        code:
          type: string
          description: "ENG: The code that identify the criteria - IT: Il codice che identifica il criterio"
        field:
          type: string
          description: "ENG: The field that determines onboarding (ex. ISEE) - IT: Il campo che determina l'onboarding (es.ISEE)"
        operator:
          type: string
          description: "ENG: Determines how to take the value: GT: Greater than value, LT: Less than value, EQ: Equal, NOT_EQ: Not equal, GE: Greater equal, LE: Less equal, BTW_OPEN: Between,  - IT: Determina in che modo considerare il valore: GT: Maggiore di value, LT: Minore di value, EQ: Uguale, NOT_EQ: Diverso, GE: Maggiore o uguale, LE: Minore o uguale, BTW_OPEN: Compreso tra"
        value:
          type: string
          description: "ENG: The field's value - IT: Il valore del campo che determina l'onboarding"
        orderDirection:
          type: string
          enum:
            - ASC
            - DESC
          description: "ENG: One of the possible order direction for the initiative criteria: ASC: Ascendent, DESC: Descendent,  - IT: Uno dei possibili ordinamenti dei criteri dell'iniziativa: ASC: Ascendente, DESC: Discendente"
        iseeTypes:
          type: array
          items:
            type: string
            enum:
              - ORDINARIO
              - MINORENNE
              - UNIVERSITARIO
              - SOCIOSANITARIO
              - DOTTORATO
              - RESIDENZIALE
              - CORRENTE
          example:
            [
              'ORDINARIO',
              'MINORENNE',
              'UNIVERSITARIO',
              'SOCIOSANITARIO',
              'DOTTORATO',
              'RESIDENZIALE',
              'CORRENTE',
            ]
          description: "ENG: The possibile ISEE types for the initiative criteria: ORDINARIO, MINORENNE, UNIVERSITARIO, SOCIOSANITARIO, DOTTORATO, RESIDENZIALE, CORRENTE,  - IT: Le possibili tipologie di ISEE per i criteri dell'iniziativa: ORDINARIO, MINORENNE, UNIVERSITARIO, SOCIOSANITARIO, DOTTORATO, RESIDENZIALE, CORRENTE"
    InitiativeDTO:
      type: object
      properties:
        initiativeId:
          type: string
          description: "ENG: The ID of the initiative - IT: L'ID dell'iniziativa"
        initiativeName:
          type: string
          description: "ENG: The name of the initiative - IT: Il nome dell'iniziativa"
        organizationId:
          type: string
          description: "ENG: The ID of the organization - IT: L'ID dell'ente"
        organizationName:
          type: string
          description: "ENG: The name of the organization - IT: Il nome dell'ente"
        creationDate:
          type: string
          format: date-time
          description: "ENG: The date of the initiative creation - IT: La data di creazione dell'iniziativa"
        updateDate:
          type: string
          format: date-time
          description: "ENG: The date of the initiative update - IT: La data di aggiornamento dell'iniziativa"
        status:
          type: string
          description: "ENG: One of the possible status of the initiative: DRAFT, IN_REVISION, APPROVED, PUBLISHED, CLOSED:,  - IT: Uno dei possibili stati in cui si trova l'iniziativa: DRAFT: In bozza, IN_REVISION: In revisione all'ente, APPROVED: Approvata dall'admin, PUBLISHED: Pubblicata dall'ente (in corso), CLOSED: Conclusa"
        autocertificationCheck:
          type: boolean
        beneficiaryRanking:
          type: boolean
          description: "ENG: The citizen position on ranking - IT: La posizione in graduatoria del cittadino"
        general:
          $ref: '#/components/schemas/InitiativeGeneralDTO'
        additionalInfo:
          $ref: '#/components/schemas/InitiativeAdditionalDTO'
        beneficiaryRule:
          $ref: '#/components/schemas/InitiativeBeneficiaryRuleDTO'
        initiativeRewardType:
          type: string
          enum:
            - DISCOUNT
            - REFUND
          description: "ENG: One of the possible reward type of the initiative: REFUND, DISCOUNT,  - IT: Una delle possibili tipologie di iniziativa: REFUND: A rimborso, DISCOUNT: A sconto"
        rewardRule:
          $ref: '#/components/schemas/InitiativeRewardRuleDTO'
        trxRule:
          $ref: '#/components/schemas/InitiativeTrxConditionsDTO'
        refundRule:
          $ref: '#/components/schemas/InitiativeRefundRuleDTO'
        isLogoPresent:
          type: boolean
          description: "ENG: Indicates if the logo is present or not - IT: Indica se il logo è presente o meno"
    DescriptionLanguageMap:
      type: object
      properties:
        language:
          type: string
        description:
          type: string
      items:
        $ref: '#/components/schemas/DescriptionLanguageMap'
    InitiativeSummaryArrayDTO:
      type: array
      items:
        $ref: '#/components/schemas/InitiativeSummaryDTO'
    InitiativeSummaryDTO:
      type: object
      properties:
        initiativeId:
          type: string
          description: "ENG: The ID of the initiative - IT: L'ID dell'iniziativa"
        initiativeName:
          type: string
          description: "ENG: The name of the initiative - IT: Il nome dell'iniziativa"
        status:
          type: string
          description: "ENG: One of the possible status of the initiative: DRAFT, IN_REVISION, APPROVED, PUBLISHED, CLOSED:,  - IT: Uno dei possibili stati in cui si trova l'iniziativa: DRAFT: In bozza, IN_REVISION: In revisione all'ente, APPROVED: Approvata dall'admin, PUBLISHED: Pubblicata dall'ente (in corso), CLOSED: Conclusa"
        creationDate:
          type: string
          format: date-time
          description: "ENG: The date of the initiative creation - IT: La data di creazione dell'iniziativa"
        updateDate:
          type: string
          format: date-time
          description: "ENG: The date of the initiative update - IT: La data di aggiornamento dell'iniziativa"
        rankingEnabled:
          type: boolean
          description: "ENG: Indicates if the initiative type is with ranking or not - IT: Indica se il tipo di iniziativa è con graduatoria oppure no"
    OrganizationListDTO:
      type: array
      items:
        $ref: '#/components/schemas/OrganizationDTO'
    OrganizationDTO:
      type: object
      properties:
        organizationId:
          type: string
          description: "ENG: The ID of the organization - IT: L'ID dell'ente"
        organizationName:
          type: string
          description: "ENG: The name of the organization - IT: Il nome dell'ente"
    ChannelArrayDTO:
      type: array
      items:
        $ref: '#/components/schemas/ChannelDTO'
    ChannelDTO:
      type: object
      properties:
        type:
          enum:
            - web
            - email
            - mobile
          type: string
          description: "ENG: One of the possible assistance contact type: web, email, mobile,  - IT: Una delle possibili tipologie di contatto per l'assistenza: web, email, mobile"
        contact:
          type: string
          description: "ENG: The assistance contact - IT: Il contatto di assistenza"
    ErrorDTO:
      type: object
      properties:
        code:
          type: string
          description: "ENG: Error code - IT: Codice di errore"
        message:
          type: string
          description: "ENG: Error message - IT: Messaggio di errore"
    AnyOfInitiativeBeneficiaryRuleDTOSelfDeclarationCriteriaItems:
      type: object
      anyOf:
        - $ref: '#/components/schemas/SelfCriteriaBoolDTO'
        - $ref: '#/components/schemas/SelfCriteriaMultiDTO'
      description: List of possible criteria
    InitiativeBeneficiaryRuleDTO:
      type: object
      properties:
        selfDeclarationCriteria:
          type: array
          items:
            $ref: '#/components/schemas/AnyOfInitiativeBeneficiaryRuleDTOSelfDeclarationCriteriaItems'
        automatedCriteria:
          type: array
          items:
            $ref: '#/components/schemas/AutomatedCriteriaDTO'
        apiKeyClientId:
          type: string
          description: "ENG: The api key of client id - IT: L'api key del client id"
        apiKeyClientAssertion:
          type: string
          description: "ENG: The api key of client assertion - IT: L'api key del client assertion"
    SelfCriteriaBoolDTO:
      type: object
      properties:
        _type:
          enum:
            - boolean
          type: string
          description: "ENG: The single choice - IT: Scelta singola"
        description:
          type: string
          description: "ENG: The description's criteria - IT: La descrizione dei criteri"
        value:
          type: boolean
          description: "ENG: A value always true - IT: Un valore sempre true"
        code:
          type: string
          description: "ENG: The index,as string, of citeria - IT: L'indice,come stringa, dei criteri"
    SelfCriteriaMultiDTO:
      title: SelfCriteriaMultiDTO
      type: object
      properties:
        _type:
          enum:
            - multi
          type: string
          description: "ENG: The multiple choice - IT: Scelta multipla"
        description:
          type: string
          description: "ENG: The description's criteria - IT: La descrizione dei criteri"
        value:
          type: array
          items:
            type: string
          example:
            - value1
            - value2
            - value3
          description: "ENG: The possible value condition - IT: Le possibili condizioni per aderire"
        code:
          type: string
          description: "ENG: The index,as string, of citeria - IT: L'indice,come stringa, dei criteri"
    DayConfig:
      type: object
      properties:
        daysOfWeek:
          uniqueItems: true
          type: array
          items:
            type: string
            enum:
              - MONDAY
              - TUESDAY
              - WEDNESDAY
              - THURSDAY
              - FRIDAY
              - SATURDAY
              - SUNDAY
            description: "ENG: The day of the transaction: MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY, SATURDAY, SUNDAY,  - IT: Il giorno della transazione: LUNEDÍ, MARTEDÍ, MERCOLEDÍ, GIOVEDÍ, VENERDÍ, SABATO, DOMENICA"
        intervals:
          type: array
          items:
            $ref: '#/components/schemas/Interval'
    InitiativeRewardRuleDTO:
      required:
        - _type
        - rewardValueType
      type: object
      properties:
        _type:
          type: string
          description: "ENG: Return a default string: rewardValue - IT: Restituisce una stringa di default: rewardValue"
        rewardValueType:
          type: string
          enum:
            - PERCENTAGE
            - ABSOLUTE
          description: "ENG: One of the possible reward value type: PERCENTAGE: A percentage amount is rewarded, ABSOLUTE: An absolute amount is rewarded,  - IT: Una delle possibili regole per premiare l'importo: PERCENTAGE: Viene riconosciuta una percentuale, ABSOLUTE: Viene riconosciuto un importo fisso"
      discriminator:
        propertyName: _type
    InitiativeTrxConditionsDTO:
      type: object
      properties:
        daysOfWeek:
          type: array
          properties:
            empty:
              type: boolean
          items:
            $ref: '#/components/schemas/DayConfig'
        threshold:
          $ref: '#/components/schemas/ThresholdDTO'
        mccFilter:
          $ref: '#/components/schemas/MccFilterDTO'
        trxCount:
          $ref: '#/components/schemas/TrxCountDTO'
        rewardLimits:
          type: array
          items:
            $ref: '#/components/schemas/RewardLimitsDTO'
    Interval:
      type: object
      properties:
        startTime:
          type: string
          description: "ENG: The start time (hours:minutes:seconds.nano) to do transactions - IT: L'orario di inizio (ore:minuti:secondi.nano) per eseguire le transazioni"
          example: '00:16:00.000'
        endTime:
          type: string
          description: "ENG: The end time (hours:minutes:seconds.nano) to do transactions - IT: L'orario di fine (ore:minuti:secondi.nano) per eseguire le transazioni"
          example: '02:00:00.000'
    MccFilterDTO:
      type: object
      properties:
        allowedList:
          type: boolean
          description: "ENG: Merchant category code filter exist or not - IT: Indica se il filtro sul codice categoria dell'esercente esiste o no"
        values:
          uniqueItems: true
          type: array
          items:
            type: string
            description: "ENG: The values of merchant category code - IT: I valori dei codici categoria dell'esercente"
    RewardLimitsDTO:
      type: object
      properties:
        frequency:
          type: string
          enum:
            - DAILY
            - WEEKLY
            - MONTHLY
            - YEARLY
          description: "ENG: The frequency to receive a reward - IT: La cadenza temporale per ricevere il premio"
        rewardLimit:
          type: number
          description: "ENG: The max value rewardable - IT: Il valore massimo premiabile"
    ThresholdDTO:
      type: object
      properties:
        from:
          type: number
          description: "ENG: Min spending threshold - IT: Soglia minima di spesa"
        fromIncluded:
          type: boolean
        to:
          type: number
          format: int64
          description: "ENG: Max spending threshold - IT: Soglia massima di spesa"
        toIncluded:
          type: boolean
    TrxCountDTO:
      type: object
      properties:
        from:
          type: integer
          format: int64
          description: "ENG: Min number of transaction to do - IT: Numero minimo di transazioni per poter ricevere il rimborso"
        fromIncluded:
          type: boolean
        to:
          type: integer
          format: int64
          description: "ENG: Max number of transaction rewardable - IT: Numero massimo di transazioni su cui verrà calcolata la percentuale di rimborso"
        toIncluded:
          type: boolean
    InitiativeRefundRuleDTO:
      type: object
      properties:
        accumulatedAmount:
          $ref: '#/components/schemas/AccumulatedAmountDTO'
        timeParameter:
          $ref: '#/components/schemas/TimeParameterDTO'
        additionalInfo:
          $ref: '#/components/schemas/RefundAdditionalInfoDTO'
    AccumulatedAmountDTO:
      required:
        - accumulatedType
      type: object
      properties:
        accumulatedType:
          type: string
          enum:
            - BUDGET_EXHAUSTED
            - THRESHOLD_REACHED
          description: "ENG: One of the possible accumulated type to do refund: BUDGET_EXHAUSTED, THRESHOLD_REACHED,  - IT: Una delle possibili tipologie di importo per erogare il rimborso: BUDGET_EXHAUSTED: Al raggiungimento dell'importo massimo, THRESHOLD_REACHED: Al raggiungimento di un certo importo"
        refundThreshold:
          type: number
          description: "ENG: The threshold to reach - IT: La soglia da raggiungere"
    TimeParameterDTO:
      required:
        - timeType
      type: object
      properties:
        timeType:
          type: string
          enum:
            - CLOSED
            - DAILY
            - WEEKLY
            - MONTHLY
            - QUARTERLY
          description: "ENG: The frequency to do refund. The possible value is one of these: CLOSED, DAILY, WEEKLY, MONTHLY, QUARTERLY,  - IT: La cadenza temporale per erogare il rimborso. Il valore possibile è uno di questi: CLOSED: Ad iniziativa conclusa, DAILY: Ogni giorno, WEEKLY: Ogni settimana, MONTHLY: Ogni mese, QUARTERLY: Ogni tre mesi"
    OnboardingDTO:
      type: object
      properties:
        content:
          type: array
          items:
            $ref: '#/components/schemas/StatusOnboardingDTOS'
        pageNo:
          type: integer
          format: int32
          description: "ENG: The number of the page - IT: Il numero della pagina"
        pageSize:
          type: integer
          format: int32
          description: "ENG: The element size for page - IT: Il numero di elementi per pagina"
        totalElements:
          type: integer
          format: int32
          description: "ENG: The total number of the elements - IT: Il numero totale degli elementi"
        totalPages:
          type: integer
          format: int32
          description: "ENG: The total number of the pages - IT: Il numero totale delle pagine"
    StatusOnboardingDTOS:
      type: object
      properties:
        beneficiary:
          type: string
          description: "ENG: The name of beneficiary - IT: Il nome del beneficiario"
        beneficiaryState:
          type: string
          enum:
            - INVITED
            - ACCEPTED_TC
            - DEMANDED
            - ON_EVALUATION
            - ONBOARDING_KO
            - ELIGIBLE_KO
            - ONBOARDING_OK
            - INACTIVE
            - UNSUBSCRIBED
            - SUSPENDED
          description: "ENG: The onboarding's status of beneficiary - IT: Lo stato dell'onboarding del beneficiario"
        updateStatusDate:
          type: string
          format: date-time
          description: "ENG: The date-time of the status update - IT: La data-ora dell'aggiornamento dello stato"
        familyId:
          type: string
          description: "ENG: The familyId of beneficiary when initiative is for family - IT: Id famiglia del beneficiario se l'iniziativa è per nuclei"
    PageOnboardingRankingsDTO:
      type: object
      properties:
        content:
          type: array
          items:
            $ref: '#/components/schemas/OnboardingRankingsDTO'
        pageNumber:
          type: integer
          format: int32
          description: "ENG: The number of the page - IT: Il numero della pagina"
        pageSize:
          type: integer
          format: int32
          description: "ENG: The element size for page - IT: Il numero di elementi per pagina"
        totalElements:
          type: integer
          format: int32
          description: "ENG: The total number of the elements - IT: Il numero totale degli elementi"
        totalPages:
          type: integer
          format: int32
          description: "ENG: The total number of the pages - IT: Il numero totale delle pagine"
        rankingStatus:
          type: string
          description: "ENG: The ranking status - IT: Lo stato della graduatoria"
        rankingPublishedTimestamp:
          type: string
          format: date-time
          description: "ENG: The date-time of the ranking pubblication - IT: La data-ora della pubblicazione della graduatoria"
        rankingGeneratedTimestamp:
          type: string
          format: date-time
          description: "ENG: The date-time of the ranking generation - IT: La data-ora della generazione della graduatoria"
        totalEligibleOk:
          type: integer
          format: int64
          description: "ENG: The number of citizen eligible and included in the ranking - IT: Il numero di cittadini che soddisfano i requisiti e rientrano nella graduatoria"
        totalEligibleKo:
          type: integer
          format: int64
          description: "ENG: The number of citizen eligible but not included in the ranking - IT: Il numero di cittadini che soddisfano i requisiti ma non rientrano nella graduatoria"
        totalOnboardingKo:
          type: integer
          format: int64
          description: "ENG: The number of citizen not eligible for the ranking - IT: Il numero di cittadini che non soddisfano i requisiti"
        rankingFilePath:
          type: string
          description: "ENG: The file path where the ranking is stored - IT: Il path del file dove si trova la graduatoria"
    OnboardingRankingsDTO:
      type: object
      properties:
        beneficiary:
          type: string
          description: "ENG: The citizen - IT: Il cittadino"
        criteriaConsensusTimestamp:
          type: string
          format: date-time
          description: "ENG: The date-time of acceptance criteria - IT: La data-ora di accettazione dei criteri"
        rankingValue:
          type: integer
          format: int64
          description: "ENG: The value that determines the ranking position - IT: Il valore che determina la posizione in graduatoria"
        ranking:
          type: integer
          format: int64
          description: "ENG: The ranking position - IT: La posizione in graduatoria"
        beneficiaryRankingStatus:
          type: string
          description: "ENG: One of the possible beneficiary ranking status: ELIGIBLE_OK: Citizen eligible and included in the ranking, ELIGIBLE_KO: Citizen eligible but not included in the ranking, ONBOARDING_KO: Citizen not eligible for the ranking,  IT: Uno dei possibili stati del cittadino in graduatoria: ELIGIBLE_OK: Cittadini che soddisfano i requisiti e rientrano nella graduatoria, ELIGIBLE_KO: Cittadini che soddisfano i requisiti ma non rientrano nella graduatoria, ONBOARDING_KO: Cittadini che non soddisfano i requisiti"
        familyId:
          type: string
          description: "ENG: The family id of user when initiative is for family unit - IT: L'id della famiglia a cui appartiene l'utente per iniziative per nuclei familiari"
    RefundAdditionalInfoDTO:
      required:
        - identificationCode
      type: object
      properties:
        identificationCode:
          type: string
          description: "ENG: The identification code - IT: Il codice identificativo"
    InitiativeStatisticsDTO:
      type: object
      properties:
        lastUpdatedDateTime:
          type: string
          format: date-time
          description: "ENG: The last date-time of statistics update - IT: L'ultima data-ora dell'aggiornamento delle statistiche"
        onboardedCitizenCount:
          type: integer
          format: int32
          description: "ENG: The counter of onboarded citizen - IT: Il contatore dei cittadini onboardati"
        accruedRewards:
          type: number
          description: "ENG: The total budget spent (accrued bonus) - IT: Il budget totale speso (bonus maturato)"
    PageRewardExportsDTO:
      title: PageRewardExportsDTO
      type: object
      properties:
        content:
          type: array
          items:
            $ref: '#/components/schemas/RewardExportsDTO'
        totalElements:
          type: integer
          format: int64
          description: "ENG: The total number of the elements - IT: Il numero totale degli elementi"
        totalPages:
          type: integer
          format: int32
          description: "ENG: The total number of the pages - IT: Il numero totale delle pagine"
    PageRewardImportsDTO:
      title: PageRewardImportsDTO
      type: object
      properties:
        content:
          type: array
          items:
            '$ref': '#/components/schemas/RewardImportsDTO'
        totalElements:
          type: integer
          format: int64
          description: "ENG: The total number of the elements - IT: Il numero totale degli elementi"
        totalPages:
          type: integer
          format: int32
          description: "ENG: The total number of the pages - IT: Il numero totale delle pagine"
    DescriptionMap:
      type: object
      description: "ENG: Description of the initiative rules - IT: Descrizione aggiuntiva delle regole dell'iniziativa"
      additionalProperties:
        type: string
      example:
        it: Ciao!
        en: Hello!
        fr: Salut!
    RewardExportsDTO:
      title: RewardExportsDTO
      required:
        [
          'id',
          'organizationId',
          'initiativeId',
          'initiativeName',
          'filePath',
          'status',
          'notificationDate',
          'percentageResulted',
          'percentageResults',
          'rewardsExported',
          'rewardsNotified',
          'rewardsResulted',
          'rewardsResultedOk',
          'rewardsResults',
        ]
      type: object
      properties:
        feedbackDate:
          type: string
          format: date-time
          description: "ENG: Date-time of the file's upload - IT: Data-ora di caricamento del file"
        filePath:
          type: string
          description: "ENG: The file path - IT: Il file path"
        id:
          type: string
          description: "ENG: The ID of the export file - IT: L'ID del file di rimborsi"
        initiativeId:
          type: string
          description: "ENG: The ID of the initiative - IT: L'ID dell'iniziativa"
        initiativeName:
          type: string
          description: "ENG: The name of the initiative - IT: Il nome dell'iniziativa"
        notificationDate:
          type: string
          format: date
          description: "ENG: The date oh the notification - IT: La data di notifica"
        organizationId:
          type: string
          description: "ENG: The ID of the organization - IT: L'ID dell'ente"
        percentageResulted:
          type: string
          description: "ENG: The percentage of rewardsResulted compared to rewardNotified, expressed as an integer in cents  - IT: La percentuale del numero dei rimborsi che hanno un esito comparato con quelli notificati, espressa in centesimi"
        percentageResultedOk:
          type: string
          description: "ENG: The percentage of rewardsResultedOk compared to rewardNotified, expressed as an integer in cents  - IT: La percentuale del numero dei rimborsi che hanno un esito positivo comparato con quelli notificati, espressa in centesimi"
        percentageResults:
          type: string
          description: "ENG: The percentage of rewardsResultsCents compared to rewardsExportedCents - IT: La percentuale del totale dei rimborsi con esito positivo in centesimi comparata con il totale dei rimborsi notificati"
        rewardsExported:
          type: string
          description: "ENG: Total of notified rewards in euro - IT: Il totale dei rimborsi notificati in euro"
        rewardsNotified:
          type: integer
          format: int64
          description: "ENG: Number of notified rewards - IT: Il numero di rimborsi notificati"
        rewardsResulted:
          type: integer
          format: int64
          description: "ENG: The number of outcome's rewards - IT: Il numero di rimborsi con un esito"
        rewardsResultedOk:
          type: integer
          format: int64
          description: "ENG: The number of successfull rewards - IT: Il numero di rimborsi con esito positivo"
        rewardsResults:
          type: string
          description: "ENG: Total successful rewards in euro - IT: Il totale dei rimborsi con esito positivo in euro"
        status:
          type: string
          description: "ENG: The status of the export file - IT: Lo stato del file dei rimborsi"
    RewardImportsDTO:
      title: RewardImportsDTO
      type: object
      properties:
        contentLength:
          type: integer
          format: int32
          description: "ENG: ContentLenght of the file's upload event - IT: ContentLength dell’evento di caricamento del file"
        eTag:
          type: string
          description: "ENG: Etag of the file's upload event - IT: Etag dell’evento di caricamento del file"
        elabDate:
          type: string
          format: date-time
          description: "ENG: The date-time of the file elaboration - IT: La data-ora dell'elaborazione del file"
        errorsSize:
          type: integer
          format: int32
          description: "ENG: The size of the error list during the file's elaboration - IT: La grandezza della lista di errori di elaborazione del file"
        exportIds:
          type: array
          items:
            type: string
            description: "ENG: The export files list that the import file refers - IT: La lista di file di rimborsi a cui il file di esiti fa riferimento"
        feedbackDate:
          type: string
          format: date-time
          description: "ENG: Date-time of the file's upload - IT: Data-ora di caricamento del file"
        filePath:
          type: string
          description: "ENG: The file path - IT: Il file path"
        initiativeId:
          type: string
          description: "ENG: The ID of the initiative - IT: L'ID dell'iniziativa"
        organizationId:
          type: string
          description: "ENG: The ID of the organization - IT: L'ID dell'ente"
        percentageResulted:
          type: string
          description: "ENG: The percentage of rewardsResulted compared to rewardNotified. - IT: La percentuale del numero dei rimborsi che hanno un esito comparato con quelli notificati."
        percentageResultedOk:
          type: string
          description: "ENG: The number of successfull rewards - IT: Il numero di rimborsi con esito positivo"
        percentageResultedOkElab:
          type: string
          description: "ENG: The number of successfull and correctly processed rewards compared to the correctly processed rewards, expressed as an integer in cents  - IT: Percentuale del numero di feedback ricevuti con esito positivo e processati correttamente rispetto al totale di feedback processati correttamente, espresso come un intero in centesimi"
        rewardsResulted:
          type: integer
          format: int64
          description: "ENG: The number of outcome's rewards - IT: Il numero di rimborsi con un esito"
        rewardsResultedError:
          type: integer
          format: int64
          description: "ENG: The number of outcome's rewards with an error - IT: Numero di record del file il cui processamento ha comportato un errore"
        rewardsResultedOk:
          type: integer
          format: int64
          description: "ENG: The number of successfull rewards - IT: Il numero di rimborsi con esito positivo"
        rewardsResultedOkError:
          type: integer
          format: int64
          description: "ENG: The number of successfull rewards with an error - IT: Numero di mandate con esito positivo andate in errore"
        status:
          type: string
          enum:
            - COMPLETE
            - ERROR
            - IN_PROGRESS
            - WARN
          description: "ENG: One of the possible status: IN PROGRESS, WARN: If the elaboration of at least one of the record is an error, ERROR, COMPLETE,  - IT: Uno dei possibili stati: IN PROGRESS: Se in fase di elaborazione, WARN: Se l’elaborazione di almeno un record si è risolta con un errore, ERROR: Se l’intero file non è stato elaborato a causa di un errore, COMPLETE: Se l’elaborazione è stata completata con successo"
        url:
          type: string
          description: "ENG: Url of the file in the blob - IT: Url verso il file nel blob"
    IbanDTO:
      type: object
      required:
        - iban
        - checkIbanStatus
        - description
        - channel
        - checkIbanResponseDate
      properties:
        iban:
          type: string
          description: "ENG: IBAN of the citizen - IT: IBAN del cittadino"
        checkIbanStatus:
          type: string
          description: "ENG: Check of the IBAN status- IT: Check dello stato dell'IBAN"
        holderBank:
          type: string
          description: "ENG: The name of the holder bank - IT: Il nome della banca titolare"
        description:
          type: string
          description: "ENG: The account description - IT: La descrizione del conto"
        channel:
          type: string
          description: "ENG: Is the operation's channel: ISSUER: third parties channel, APP_IO,  - IT: È il canale da cui proviene l'operazione: ISSUER: canale di terze parti, APP_IO"
        checkIbanResponseDate:
          type: string
          format: date-time
          description: "ENG: The date-time of check iban - IT: La data-ora del check iban"
    IbanErrorDTO:
      type: object
      required:
        - code
        - message
      properties:
        code:
          type: string
          enum:
            - IBAN_NOT_FOUND
            - IBAN_INVALID_REQUEST
            - IBAN_TOO_MANY_REQUESTS
            - IBAN_GENERIC_ERROR
          description: >-
            "ENG: Error code: IBAN_NOT_FOUND: Iban not found,
             IBAN_INVALID_REQUEST: Something went wrong handling request,
             IBAN_TOO_MANY_REQUESTS: Too many requests,
             IBAN_GENERIC_ERROR: Application Error - IT: Codice di errore:
             IBAN_NOT_FOUND: Iban non trovato,
             IBAN_INVALID_REQUEST: Qualcosa è andato storto durante l'invio della richiesta,
             IBAN_TOO_MANY_REQUESTS: Troppe richieste,
             IBAN_GENERIC_ERROR: Errore generico"
        message:
          type: string
          description: "ENG: Error message - IT: Messaggio di errore"
    InstrumentListDTO:
      type: object
      required:
        - instrumentList
      properties:
        instrumentList:
          type: array
          items:
            $ref: '#/components/schemas/InstrumentDTO'
          description: "ENG: The list of payment instruments associated to the initiative by the citizen - IT: Lista degli strumenti di pagamento associati dal cittadino sull'iniziativa"
    InstrumentDTO:
      title: InstrumentDTO
      type: object
      required:
        - instrumentId
        - instrumentType
      properties:
        idWallet:
          type: string
          description: >-
            ENG: Wallet's id provided by the Payment manager - IT:
            Identificativo del portafoglio fornito dal gestore di pagamenti
        instrumentId:
          type: string
          description: >-
            ENG: Payment instrument id - IT: Identificativo dello strumento di
            pagamento
        maskedPan:
          type: string
          description: 'ENG: Masked Pan - IT: Masked Pan'
        channel:
          type: string
          description: 'ENG: Channel - IT: Canale di richiesta'
        brandLogo:
          type: string
          description: >-
            ENG: Card's brand logo URL - IT: URL del logo del marchio della
            carta
        brand:
          type: string
          description: >-
            ENG: Card's brand as mastercard, visa, ecc. - IT: Marchio della
            carta come mastercard, visa, ecc...
        status:
          enum:
            - ACTIVE
            - PENDING_ENROLLMENT_REQUEST
            - PENDING_DEACTIVATION_REQUEST
          type: string
          description: 'ENG: The status of the instrument - IT: Stato dello strumento'
        instrumentType:
          type: string
          enum:
            - CARD
            - APP_IO_PAYMENT
            - IDPAYCODE
        activationDate:
          type: string
          format: date-time
          description: >-
            ENG: Activation date of the instrument - IT: Data di attivazione
            dello strumento
    OperationDTO:
      oneOf:
        - $ref: '#/components/schemas/TransactionDetailDTO'
        - $ref: '#/components/schemas/InstrumentOperationDTO'
        - $ref: '#/components/schemas/IbanOperationDTO'
        - $ref: '#/components/schemas/OnboardingOperationDTO'
        - $ref: '#/components/schemas/RefundOperationDTO'
        - $ref: '#/components/schemas/SuspendOperationDTO'
        - $ref: '#/components/schemas/ReadmittedOperationDTO'
        - $ref: '#/components/schemas/UnsubscribeOperationDTO'
    TimelineDTO:
      type: object
      required:
        - operationList
      properties:
        lastUpdate:
          type: string
          description: "ENG: The date of the last update - IT: La data dell'ultimo aggiornamento"
          format: date-time
        operationList:
          type: array
          items:
            $ref: '#/components/schemas/OperationListDTO'
          description: "ENG: The list of transactions and operations of citizen on initiative - IT: La lista delle transazioni ed operazioni di un cittadino su un iniziativa"
        pageNo:
          type: integer
          format: int32
          description: "ENG: The number of the page - IT: Il numero della pagina"
        pageSize:
          type: integer
          format: int32
          description: "ENG: The element size for page - IT: Il numero di elementi per pagina"
        totalElements:
          type: integer
          format: int32
          description: "ENG: The total number of the elements - IT: Il numero totale degli elementi"
        totalPages:
          type: integer
          format: int32
          description: "ENG: The total number of the pages - IT: Il numero totale delle pagine"
    OperationListDTO:
      description: Complex type for items in the operation list
      oneOf:
        - $ref: '#/components/schemas/TransactionOperationDTO'
        - $ref: '#/components/schemas/InstrumentOperationDTO'
        - $ref: '#/components/schemas/RejectedInstrumentOperationDTO'
        - $ref: '#/components/schemas/IbanOperationDTO'
        - $ref: '#/components/schemas/OnboardingOperationDTO'
        - $ref: '#/components/schemas/RefundOperationDTO'
        - $ref: '#/components/schemas/SuspendOperationDTO'
        - $ref: '#/components/schemas/ReadmittedOperationDTO'
        - $ref: '#/components/schemas/UnsubscribeOperationDTO'
    RejectedInstrumentOperationDTO:
      type: object
      required:
        - operationId
        - operationType
        - operationDate
        - channel
      properties:
        operationId:
          type: string
          description: 'ENG: Id of operation - IT: Identificativo dell''operazione'
        operationType:
          enum:
            - REJECTED_ADD_INSTRUMENT
            - REJECTED_DELETE_INSTRUMENT
          description: >-
            ENG: Operation type [REJECTED_ADD_INSTRUMENT: Rejected add
            instrument, REJECTED_DELETE_INSTRUMENT: Rejected delete instrument]
            - IT: Tipologia di operazione [REJECTED_ADD_INSTRUMENT: Respinto
            l'inserimento dello strumento, REJECTED_DELETE_INSTRUMENT: Respinta
            la cancellazione dello strumento]
          type: string
        operationDate:
          type: string
          format: date-time
          description: 'ENG: Operation date - IT: Data dell''operazione'
        brandLogo:
          type: string
          description: >-
            ENG: Card's brand logo URL - IT: URL del logo del marchio della
            carta
        brand:
          type: string
          description: >-
            ENG: Card's brand as mastercard, visa, ecc. - IT: Marchio della
            carta come mastercard, visa, ecc...
        instrumentId:
          type: string
          description: 'ENG: Id instrument - IT: Identificativo dello strumento'
        maskedPan:
          type: string
          description: 'ENG: masked PAN - IT: masked PAN'
        channel:
          type: string
          description: >-
            ENG: Channel from which the operation takes place - IT: Canale da
            cui avviene l'operazione
        instrumentType:
          type: string
          enum:
            - CARD
            - IDPAYCODE
    TransactionDetailDTO:
      type: object
      required:
        - operationId
        - operationType
        - operationDate
        - accruedCents
        - status
      properties:
        operationId:
          type: string
          description: 'ENG: Id of the operation - IT: Identificativo dell''operazione'
        operationType:
          enum:
            - TRANSACTION
            - REVERSAL
          type: string
          description: 'ENG: Operation type - IT: Tipologia di operazione'
        eventId:
          type: string
        brandLogo:
          type: string
          description: >-
            ENG: Card's brand logo URL - IT: URL del logo del marchio della
            carta
        brand:
          type: string
          description: >-
            ENG: Card's brand as mastercard, visa, ecc. - IT: Marchio della
            carta come mastercard, visa, ecc...
        maskedPan:
          type: string
          description: 'ENG: Masked Pan - IT: Masked Pan'
        amountCents:
          type: integer
          format: int64
          description: 'ENG: Transaction amount - IT: Importo della transazione'
        accruedCents:
          type: integer
          format: int64
          description: 'ENG: Transaction accrued - IT: Importo accumulato'
        operationDate:
          type: string
          format: date-time
          description: 'ENG: Operation date - IT: Data dell''operazione'
        circuitType:
          type: string
          description: >-
            ENG: Circuit type - IT: Tipologia del circuito 00-> Bancomat,
            01->Visa, 02->Mastercard, 03->Amex, 04->JCB, 05->UnionPay,
            06->Diners, 07->PostePay, 08->BancomatPay, 09->Satispay,
            10->PrivateCircuit
        idTrxIssuer:
          type: string
          description: >-
            ENG: Transaction issuer ID - IT: Identificativo della transazione
            rispetto all'issuer
        idTrxAcquirer:
          type: string
          description: >-
            ENG: Transaction acquirer ID- IT: Identificativo della transazione
            rispetto all'acquirer
        status:
          type: string
          enum:
            - AUTHORIZED
            - REWARDED
            - CANCELLED
          description: >-
            ENG: Transaction status [AUTHORIZED: Transaction authorize,
            REWARDED: Transaction rewarded, CANCELLED: Transaction cancelled]  -
            IT: Stato della transazione [AUTHORIZED: Transazione autorizzata,
            REWARDED: Transazione premiata, CANCELLED: transazione cancellata]
        channel:
          type: string
          enum:
            - RTD
            - QRCODE
            - IDPAYCODE
            - BARCODE
          description: >-
            ENG: Channel from which the transaction takes place - IT: Canale da
            cui avviene la transazione
        businessName:
          type: string
    InstrumentOperationDTO:
      type: object
      required:
        - operationId
        - operationType
        - operationDate
        - brandLogo
        - maskedPan
        - channel
      properties:
        operationId:
          type: string
          description: "ENG: The ID of the operation - IT: L'ID dell'operazione"
        operationType:
          enum:
            - ADD_INSTRUMENT
            - DELETE_INSTRUMENT
          type: string
          description: "ENG: One of the possible operation type: ADD_INSTRUMENT, DELETE_INSTRUMENT,  - IT: Uno dei possibili tipi di operazione: ADD_INSTRUMENT, DELETE_INSTRUMENT"
        operationDate:
          type: string
          format: date-time
          description: "ENG: The date-time of the operation - IT: La data-ora dell'operazione"
        brandLogo:
          type: string
          description: "ENG: The logo card's brand as mastercard, visa, etc. - IT: Il logo del brand della carta: mastercard, visa, ecc."
        maskedPan:
          type: string
          description: "ENG: Masked Pan of the payment instrument - IT: Numero Pan della carta oscurato"
        channel:
          type: string
          description: "ENG: Is the operation's channel: ISSUER: third parties channel, APP_IO,  - IT: È il canale da cui proviene l'operazione: ISSUER: canale di terze parti, APP_IO"
    IbanOperationDTO:
      type: object
      required:
        - operationId
        - operationType
        - operationDate
        - iban
        - channel
      properties:
        operationId:
          type: string
          description: "ENG: The ID of the operation - IT: L'ID dell'operazione"
        operationType:
          enum:
            - ADD_IBAN
          type: string
          description: "ENG: One of the possible operation type: ADD_IBAN,  - IT: Uno dei possibili tipi di operazione: ADD_IBAN"
        operationDate:
          type: string
          format: date-time
          description: "ENG: The date-time of the operation - IT: La data-ora dell'operazione"
        iban:
          type: string
          description: "ENG: IBAN of the citizen - IT: IBAN del cittadino"
        channel:
          type: string
          description: "ENG: Is the operation's channel: ISSUER: third parties channel, APP_IO,  - IT: È il canale da cui proviene l'operazione: ISSUER: canale di terze parti, APP_IO"
    OnboardingOperationDTO:
      type: object
      required:
        - operationId
        - operationType
        - operationDate
      properties:
        operationId:
          type: string
          description: "ENG: The ID of the operation - IT: L'ID dell'operazione"
        operationType:
          enum:
            - ONBOARDING
          type: string
          description: "ENG: One of the possible operation type: ONBOARDING,  - IT: Uno dei possibili tipi di operazione: ONBOARDING"
        operationDate:
          type: string
          format: date-time
          description: "ENG: The date-time of the operation - IT: La data-ora dell'operazione"
    RefundOperationDTO:
      type: object
      required:
        - operationId
        - operationType
        - eventId
        - operationDate
        - amountCents
      properties:
        operationId:
          type: string
          description: "ENG: The ID of the operation - IT: L'ID dell'operazione"
        eventId:
          type: string
          description: "ENG: The ID of the event - IT: L'ID dell'evento"
        operationType:
          enum:
            - PAID_REFUND
            - REJECTED_REFUND
          type: string
          description: "ENG: One of the possible operation type: PAID_REFUND, REJECTED_REFUND,  - IT: Uno dei possibili tipi di operazione: PAID_REFUND: Rimborso pagato, REJECTED_REFUND: Rimborso rifiutato"
        operationDate:
          type: string
          format: date
          description: "ENG: The date-time of the operation - IT: La data-ora dell'operazione"
        amountCents:
          type: integer
          format: int64
          description: "ENG: The amount of the refund - IT: Il totale del rimborso"
        accruedCents:
          type: integer
          format: int64
          description: "ENG: Accrued benefits - IT: Benefici maturati"
    TransactionOperationDTO:
      type: object
      required:
        - operationId
        - operationType
        - operationDate
        - accruedCents
        - status
      properties:
        operationId:
          type: string
          description: "ENG: The ID of the operation - IT: L'ID dell'operazione"
        operationType:
          enum:
            - TRANSACTION
            - REVERSAL
          type: string
          description: "ENG: Indicates one of the possible operation type: TRANSACTION, REVERSAL,  - IT: Indica uno dei possibili tipi di operazione: TRANSACTION: Transazione, REVERSAL: Storno"
        eventId:
          type: string
          description: "ENG: Event ID - IT: Identificativo dell'evento"
        operationDate:
          type: string
          format: date-time
          description: "ENG: The date-time of the operation - IT: La data-ora dell'operazione"
        brandLogo:
          type: string
          description: "ENG: The logo card's brand as mastercard, visa, etc. - IT: Il logo del brand della carta: mastercard, visa, ecc."
        maskedPan:
          type: string
          description: "ENG: Masked Pan of the payment instrument - IT: Numero Pan della carta oscurato"
        amountCents:
          type: integer
          format: int64
          description: "ENG: The amount of transaction - IT: Il totale della transazione"
        accruedCents:
          type: integer
          format: int64
          description: "ENG: Accrued benefits - IT: Benefici maturati"
        circuitType:
          type: string
          description: "ENG: 00-> Bancomat, 01->Visa, 02->Mastercard, 03->Amex, 04->JCB, 05->UnionPay, 06->Diners, 07->PostePay, 08->BancomatPay, 09->Satispay, 10->PrivateCircuit - IT: 00-> Bancomat, 01->Visa, 02->Mastercard, 03->Amex, 04->JCB, 05->UnionPay, 06->Diners, 07->PostePay, 08->BancomatPay, 09->Satispay, 10->PrivateCircuit"
        idTrxIssuer:
          type: string
          description: >-
            ENG: Transaction issuer ID - IT: Identificativo della transazione
            rispetto all'issuer
        idTrxAcquirer:
          type: string
          description: >-
            ENG: Transaction acquirer ID- IT: Identificativo della transazione
            rispetto all'acquirer
        status:
          type: string
          enum:
            - AUTHORIZED
            - REWARDED
            - CANCELLED
          description: >-
            ENG: Transaction status [AUTHORIZED: Transaction authorize,
            REWARDED: Transaction rewarded, CANCELLED: Transaction cancelled]  -
            IT: Stato della transazione [AUTHORIZED: Transazione autorizzata,
            REWARDED: Transazione premiata, CANCELLED: transazione cancellata]
        channel:
          type: string
          enum:
            - RTD
            - QRCODE
            - IDPAYCODE
            - BARCODE
          description: >-
            ENG: Channel from which the transaction takes place - IT: Canale da
            cui avviene la transazione
        businessName:
          type: string
          description: 'ENG: Business name - IT: Nome dell''esercente'
    SuspendOperationDTO:
      type: object
      required:
        - operationId
        - operationType
        - operationDate
      properties:
        operationId:
          type: string
          description: "ENG: The ID of the operation - IT: L'ID dell'operazione"
        operationType:
          enum:
            - SUSPENDED
          type: string
          description: "ENG: Indicates one of the possible operation type: SUSPENDED,  - IT: Indica uno dei possibili tipi di operazione: SUSPENDED"
        operationDate:
          type: string
          format: date-time
          description: "ENG: The date-time of the operation - IT: La data-ora dell'operazione"
    ReadmittedOperationDTO:
      type: object
      required:
        - operationId
        - operationType
        - operationDate
      properties:
        operationId:
          type: string
          description: "ENG: The ID of the operation - IT: L'ID dell'operazione"
        operationType:
          enum:
            - READMITTED
          type: string
          description: "ENG: Indicates one of the possible operation type: READMITTED - IT: Indica uno dei possibili tipi di operazione: READMITTED"
        operationDate:
          type: string
          format: date-time
          description: "ENG: The date-time of the operation - IT: La data-ora dell'operazione"
    UnsubscribeOperationDTO:
      type: object
      required:
        - operationId
        - operationType
        - operationDate
      properties:
        operationId:
          type: string
          description: "ENG: Id of the operation - IT: Identificativo dell'operazione"
        operationType:
          enum:
            - UNSUBSCRIBED
          type: string
          description: "ENG: Operation type - IT: Tipologia dell'operazione"
        operationDate:
          type: string
          format: date-time
          description: "ENG: Operation date - IT: Data dell'operazione"
    CsvDTO:
      title: CsvDTO
      type: object
      properties:
        data:
          type: string
    ExportSummaryDTO:
      title: ExportSummaryDTO
      type: object
      properties:
        createDate:
          type: string
          format: date
          description: "ENG: The creation date of the refund file - IT: La data di creazione del file dei rimborsi"
        totalAmountCents:
          type: integer
          format: int64
          description: "ENG: The total of rewards present in the file - IT: Il totale dei premi presenti nel file"
        totalRefundedAmountCents:
          type: integer
          format: int64
          description: "ENG: The total of the rewards refunded present in the file - IT: Il totale dei premi rimborsati presenti nel file"
        totalRefunds:
          type: integer
          format: int64
          description: "ENG: The number of total refunds - IT: Il numero totale dei rimborsi presenti"
        successPercentage:
          type: string
          description: "ENG: The success percentage of the refunds - IT: La percentuale di successo dei rimborsi"
        status:
          type: string
          description: "ENG: One of the possible status: EXPORTED, PARTIAL, COMPLETE - IT: Uno dei possibili stati: EXPORTED: Al momento della creazione del file, PARTIAL: Se non si hanno tutti gli esiti, COMPLETE: Se tutte le richieste sono state ricevute"
    ExportListDTO:
      type: object
      properties:
        content:
          type: array
          items:
            $ref: '#/components/schemas/ExportDetailDTO'
        pageNo:
          type: integer
          format: int32
          description: "ENG: The number of the page - IT: Il numero della pagina"
        pageSize:
          type: integer
          format: int32
          description: "ENG: The element size for page - IT: Il numero di elementi per pagina"
        totalElements:
          type: integer
          format: int32
          description: "ENG: The total number of the elements - IT: Il numero totale degli elementi"
        totalPages:
          type: integer
          format: int32
          description: "ENG: The total number of the pages - IT: Il numero totale delle pagine"
    OnboardingStatusDTO:
      title: OnboardingStatusDTO
      type: object
      required:
        - status
      properties:
        status:
          enum:
            - INVITED
            - ACCEPTED_TC
            - DEMANDED
            - ON_EVALUATION
            - ONBOARDING_KO
            - ELIGIBLE_KO
            - ONBOARDING_OK
            - INACTIVE
            - UNSUBSCRIBED
            - SUSPENDED
          type: string
          description: "ENG: The actual status for the onboarding's citizen. The possible status is one of these: INVITED, ACCEPTED_TC, DEMANDED, ON_EVALUATION, ONBOARDING_KO, ELIGIBLE_KO, ONBOARDING_OK, ELIGIBLE, INACTIVE, UNSUBSCRIBED, SUSPENDED,  - IT: Lo stato attuale dell'onboarding in cui si trova il cittadino. Lo stato può essere uno di questi: INVITED, ACCEPTED_TC, DEMANDED, ON_EVALUATION, ONBOARDING_KO, ELIGIBLE_KO, ONBOARDING_OK, ELIGIBLE, INACTIVE, UNSUBSCRIBED, SUSPENDED"
    ExportDetailDTO:
      type: object
      properties:
        iban:
          type: string
          description: "ENG: IBAN of the citizen - IT: IBAN del cittadino"
        amountCents:
          type: integer
          format: int64
          description: "ENG: The amount of refund - IT: Il totale del rimborso"
        status:
          type: string
          description: "ENG: One of the possible status: RECOVERED, EXPORTED, COMPLETED_OK, COMPLETED_KO - IT: Uno dei possibili stati: RECOVERED: Se in precedenza era un completed_ko ma è stato recuperato, EXPORTED: Se correttamente esportato nel csv da affidare all’ente, COMPLETED_OK: Se si è avuto riscontro positivo, COMPLETED_KO: Se si è avuto riscontro negativo, eventuali dettagli nel campo rejection_reason"
        eventId:
          type: string
          description: "ENG: The ID of the event - IT: L'ID dell'evento"
    RefundDetailDTO:
      type: object
      properties:
        fiscalCode:
          type: string
          description: "ENG: The fiscal code of the citizen - IT: Il codice fiscale del cittadino"
        iban:
          type: string
          description: "ENG: IBAN of the citizen - IT: IBAN del cittadino"
        amountCents:
          type: integer
          format: int64
          description: "ENG: The amount of refund - IT: Il totale del rimborso"
        startDate:
          type: string
          format: date
          description: "ENG: The start date of the refund's reference period - IT: La data di inizio del periodo di riferimento del rimborso"
        endDate:
          type: string
          format: date
          description: "ENG: The end date of the refund's reference period - IT: La data di fine del periodo di riferimento del rimborso"
        status:
          type: string
          description: "ENG: One of the possible status: RECOVERED, EXPORTED, COMPLETED_OK, COMPLETED_KO - IT: Uno dei possibili stati: RECOVERED: Se in precedenza era un completed_ko ma è stato recuperato, EXPORTED: Se correttamente esportato nel csv da affidare all’ente, COMPLETED_OK: Se si è avuto riscontro positivo, COMPLETED_KO: Se si è avuto riscontro negativo, eventuali dettagli nel campo rejection_reason"
        refundType:
          type: string
          description: "ENG: One of the possible type: ORDINARY, REMEDIAL - IT: Una delle possibili tipologie: ORDINARY, REMEDIAL: Quando un ordinary va ko e viene recuperato"
        cro:
          type: string
          description: "ENG: CRO = Codice di Riferimento dell'Operazione - IT: CRO = Codice di Riferimento dell'Operazione"
        transferDate:
          type: string
          format: date
          description: "ENG: The date of refund's sending by the organization - IT: La data di invio del rimborso da parte dell'ente"
        userNotificationDate:
          type: string
          format: date
          description: "ENG: The date of the notification to user - IT: La data di notifica all'utente"
    MerchantListDTO:
      type: object
      properties:
        content:
          type: array
          items:
            $ref: '#/components/schemas/MerchantDTO'
        pageNo:
          type: integer
          format: int32
          description: "ENG: The number of the page <br> IT: Il numero della pagina"
        pageSize:
          type: integer
          format: int32
          description: "ENG: The element size for page <br> IT: Il numero di elementi per pagina"
        totalElements:
          type: integer
          format: int32
          description: "ENG: The total number of the elements <br> IT: Il numero totale degli elementi"
        totalPages:
          type: integer
          format: int32
          description: "ENG: The total number of the pages <br> IT: Il numero totale delle pagine"
    MerchantDTO:
      type: object
      properties:
        merchantId:
          type: string
          description: "ENG: The ID of the merchant <br> IT: L'ID' dell'esercente"
        businessName:
          type: string
          description: "ENG: The name of the merchant <br> IT: La ragione sociale dell'esercente"
        fiscalCode:
          type: string
          description: "ENG: The fiscal code/vat number of the merchant <br> IT: Il codice fiscale/partita iva dell'esercente"
        merchantStatus:
          type: string
          enum:
            - UPLOADED
          description: "ENG: One of the possible merchant onboarding status: <ul><li>UPLOADED:This is the initial status after the csv upload</li></ul>IT: Uno dei possibili stati dell'onboarding da parte dell'esercente: <ul><li>UPLOADED:Questo è lo stato iniziale dopo il caricamento del file csv</li></ul>"
        updateStatusDate:
          type: string
          format: date-time
          description: "ENG: Time and date of the last status update <br> IT: La data ed ora dell'ultimo aggiornamento dello stato"
    MerchantTransactionsListDTO:
      type: object
      required:
        - content
        - pageNo
        - pageSize
        - totalElements
        - totalPages
      properties:
        content:
          type: array
          items:
            $ref: '#/components/schemas/MerchantTransactionDTO'
        pageNo:
          type: integer
          format: int32
          description: "ENG: The number of the page - IT: Il numero della pagina"
        pageSize:
          type: integer
          format: int32
          description: "ENG: The element size for page - IT: Il numero di elementi per pagina"
        totalElements:
          type: integer
          format: int32
          description: "ENG: The total number of the elements - IT: Il numero totale degli elementi"
        totalPages:
          type: integer
          format: int32
          description: "ENG: The total number of the pages - IT: Il numero totale delle pagine"
    MerchantTransactionDTO:
      type: object
      required:
        - trxCode
        - trxId
        - effectiveAmountCents
        - trxExpirationSeconds
        - status
      properties:
        trxCode:
          type: string
          description: "ENG: Transaction code - IT: Il codice della transazione"
        trxId:
          type: string
          description: "ENG: Transaction ID - IT: L'ID della transazione"
        fiscalCode:
          type: string
          description: "ENG: Citizen fiscal code - IT: Codice fiscale del cittadino"
        effectiveAmountCents:
          type: integer
          format: int64
          description: "ENG: Transaction amount - IT: Quantitativo della transazione"
        rewardAmountCents:
          type: integer
          format: int64
          description: "ENG: Reward amount - IT: Premio generato"
        trxDate:
          type: string
          format: date-time
          description: "ENG: The date of the transaction - IT: La data della transazione"
        trxExpirationSeconds:
          type: number
          description: "ENG: Expiration time of the transaction, in seconds - IT: Scadenza della transazione, in secondi"
        updateDate:
          type: string
          format: date-time
          description: "ENG: The date of the transaction update - IT: La data di aggiornamento della transazione"
        status:
          type: string
          enum:
            - CREATED
            - IDENTIFIED
            - AUTHORIZATION_REQUESTED
            - AUTHORIZED
            - REJECTED
          description: "ENG: Status of the transaction - IT: Stato della transazione"
        splitPayment:
          type: boolean
          description: "ENG: TRUE, if the authorized sum is less than the requested sum or FALSE, if the authorized sum is equal to the requested sum - IT: TRUE, se la somma autorizzata è inferiore alla somma richiesta o FALSE, se la somma autorizzata è uguale alla somma richiesta."
        residualAmountCents:
          type: integer
          format: int64
          description: "ENG: Remaining amount to be paid if the authorized sum is less than the requested sum - IT: Importo restante da pagare nel caso in cui la somma autorizzata sia inferiore alla somma richiesta."
        channel:
          type: string
          description: "ENG: Channel from which the transaction takes place - IT: Canale da
            cui avviene la transazione"
        qrcodePngUrl:
          type: string
          description: "ENG: Url to the QR code image - IT: Url all'immagine del QR code"
        qrcodeTxtUrl:
          type: string
          description: "ENG: Url of the QR code link - IT: Url del QR code"
    MerchantTransactionsProcessedListDTO:
      type: object
      required:
        - content
        - pageNo
        - pageSize
        - totalElements
        - totalPages
      properties:
        content:
          type: array
          items:
            $ref: '#/components/schemas/MerchantTransactionProcessedDTO'
        pageNo:
          type: integer
          format: int32
          description: "ENG: The number of the page - IT: Il numero della pagina"
        pageSize:
          type: integer
          format: int32
          description: "ENG: The element size for page - IT: Il numero di elementi per pagina"
        totalElements:
          type: integer
          format: int32
          description: "ENG: The total number of the elements - IT: Il numero totale degli elementi"
        totalPages:
          type: integer
          format: int32
          description: "ENG: The total number of the pages - IT: Il numero totale delle pagine"
    MerchantTransactionProcessedDTO:
      type: object
      required:
        - trxId
        - effectiveAmountCents
        - status
      properties:
        trxId:
          type: string
          description: "ENG: Transaction ID - IT: L'ID della transazione"
        fiscalCode:
          type: string
          description: "ENG: Citizen fiscal code - IT: Codice fiscale del cittadino"
        effectiveAmountCents:
          type: integer
          format: int64
          description: "ENG: Transaction amount - IT: Quantitativo della transazione"
        rewardAmountCents:
          type: integer
          format: int64
          description: "ENG: Reward amount - IT: Premio generato"
        trxDate:
          type: string
          format: date-time
          description: "ENG: The date of the transaction - IT: La data della transazione"
        updateDate:
          type: string
          format: date-time
          description: "ENG: The date of the transaction update - IT: La data di aggiornamento della transazione"
        status:
          type: string
          enum:
            - REWARDED
            - CANCELLED
          description: "ENG: Status of the transaction - IT: Stato della transazione"
        channel:
          type: string
          description: "ENG: Channel from which the transaction takes place - IT: Canale da
              cui avviene la transazione"
    MerchantStatisticsDTO:
      type: object
      properties:
        amountCents:
          type: integer
          format: int64
          description: "ENG: Amount supplied - IT: Totale erogato"
        accruedCents:
          type: integer
          format: int64
          description: "ENG: Amount accrued - IT: Importo accumulato"
        refundedCents:
          type: integer
          format: int64
          description: "ENG: Amount refunded - IT: Importo rimborsato"
    StatisticsErrorDTO:
      type: object
      required:
        - code
        - message
      properties:
        code:
          type: string
          enum:
            - STATISTICS_NOT_FOUND
            - STATISTICS_INVALID_REQUEST
            - STATISTICS_TOO_MANY_REQUESTS
            - STATISTICS_GENERIC_ERROR
          description: >-
            "ENG: Error code: STATISTICS_NOT_FOUND: Stats not found,
             STATISTICS_INVALID_REQUEST: Something went wrong handling request,
             STATISTICS_TOO_MANY_REQUESTS: Too many requests,
             STATISTICS_GENERIC_ERROR: Application Error - IT: Codice di errore:
             STATISTICS_NOT_FOUND: Statistiche non trovate,
             STATISTICS_INVALID_REQUEST: Qualcosa è andato storto durante l'invio della richiesta,
             STATISTICS_TOO_MANY_REQUESTS: Troppe richieste,
             STATISTICS_GENERIC_ERROR: Errore generico"
        message:
          type: string
          description: "ENG: Error message - IT: Messaggio di errore"
    TimelineErrorDTO:
      type: object
      required:
        - code
        - message
      properties:
        code:
          type: string
          enum:
            - TIMELINE_DETAIL_NOT_FOUND
            - TIMELINE_USER_NOT_FOUND
            - TIMELINE_REFUNDS_NOT_FOUND
            - TIMELINE_INVALID_REQUEST
            - TIMELINE_TOO_MANY_REQUESTS
            - TIMELINE_GENERIC_ERROR
          description: >-
            "ENG: Error code: TIMELINE_DETAIL_NOT_FOUND: Detail of Timeline not found,
             TIMELINE_USER_NOT_FOUND: Timeline for the current user not found,
             TIMELINE_REFUNDS_NOT_FOUND: Refund for current initiative not found,
             TIMELINE_INVALID_REQUEST: Something went wrong handling request,
             TIMELINE_TOO_MANY_REQUESTS: Too many requests,
             TIMELINE_GENERIC_ERROR: Application Error - IT: Codice di errore:
             TIMELINE_DETAIL_NOT_FOUND: Dettaglio della Timeline non trovato,
             TIMELINE_USER_NOT_FOUND: Timeline per utente corrente non trovata,
             TIMELINE_REFUNDS_NOT_FOUND:  Rimborso per la corrente iniziativa non trovato,
             TIMELINE_INVALID_REQUEST: Qualcosa è andato storto durante l'invio della richiesta,
             TIMELINE_TOO_MANY_REQUESTS: Troppe richieste,
             TIMELINE_GENERIC_ERROR: Errore generico"
        message:
          type: string
          description: "ENG: Error message - IT: Messaggio di errore"
    MerchantDetailDTO:
      type: object
      properties:
        initiativeId:
          type: string
          description: "ENG: The ID of the initiative <br> IT: L'ID' dell'iniziativa"
        initiativeName:
          type: string
          description: "ENG: The name of the initiative <br> IT: Il nome dell'iniziativa"
        businessName:
          type: string
          description: "ENG: The name of the merchant <br> IT: La ragione sociale dell'esercente"
        legalOfficeAddress:
          type: string
          description: "ENG: The address of the legal office <br> IT: L'indirizzo della sede legale"
        legalOfficeMunicipality:
          type: string
          description: "ENG: The municipality of the legal office <br> IT: Il comune della sede legale"
        legalOfficeProvince:
          type: string
          description: "ENG: The province of the legal office <br> IT: La provincia della sede legale"
        legalOfficeZipCode:
          type: string
          description: "ENG: The zipcode of the legal office <br> IT: Il CAP della sede legale"
        certifiedEmail:
          type: string
          description: "ENG: The certified email address of the merchant <br> IT: L'indirizzo email PEC dell' esercente"
        fiscalCode:
          type: string
          description: "ENG: The fiscal code/vat number of the merchant <br> IT: Il codice fiscale/partita iva dell'esercente"
        vatNumber:
          type: string
          description: "ENG: The vat number of the merchant <br> IT: La partita iva dell'esercente"
        status:
          type: string
          enum:
            - UPLOADED
          description: "ENG: One of the possible merchant onboarding status: <ul><li>UPLOADED:This is the initial status after the csv upload</li></ul>IT: Uno dei possibili stati dell'onboarding da parte dell'esercente: <ul><li>UPLOADED:Questo è lo stato iniziale dopo il caricamento del file csv</li></ul>"
        iban:
          type: string
          description: "ENG: The iban of the merchant <br> IT: L'iban dell'esercente"
        creationDate:
          type: string
          format: date-time
          description: "ENG: Time and date of the initiative creation <br> IT: La data ed ora della creazione dell'iniziativa"
        updateDate:
          type: string
          format: date-time
          description: "ENG: Time and date of the last status update <br> IT: La data ed ora dell'ultimo aggiornamento dello stato"
    WalletErrorDTO:
      type: object
      required:
        - code
        - message
      properties:
        code:
          type: string
          enum:
            - WALLET_USER_UNSUBSCRIBED
            - WALLET_ENROLL_INSTRUMENT_NOT_ALLOWED_FOR_DISCOUNT_INITIATIVE
            - WALLET_ENROLL_IBAN_NOT_ALLOWED_FOR_DISCOUNT_INITIATIVE
            - WALLET_ENROLL_INSTRUMENT_NOT_ALLOWED_FOR_REFUND_INITIATIVE
            - WALLET_INITIATIVE_ENDED
            - WALLET_USER_NOT_ONBOARDED
            - WALLET_IBAN_NOT_ITALIAN
            - WALLET_INSTRUMENT_ALREADY_ASSOCIATED
            - WALLET_INSTRUMENT_DELETE_NOT_ALLOWED
            - WALLET_INSTRUMENT_IDPAYCODE_NOT_FOUND
            - WALLET_SUSPENSION_NOT_ALLOWED_FOR_USER_STATUS
            - WALLET_READMISSION_NOT_ALLOWED_FOR_USER_STATUS
            - WALLET_INSTRUMENT_NOT_FOUND
            - WALLET_GENERIC_ERROR
            - WALLET_INVALID_REQUEST
            - WALLET_TOO_MANY_REQUESTS
          description: >-
            "ENG: Error code:
            WALLET_USER_UNSUBSCRIBED: The user has unsubscribed from initiative,
            WALLET_ENROLL_INSTRUMENT_NOT_ALLOWED_FOR_DISCOUNT_INITIATIVE: It is not possible to
            enroll a payment instrument for a discount initiative,
            WALLET_ENROLL_IBAN_NOT_ALLOWED_FOR_DISCOUNT_INITIATIVE: It is not possible enroll
            an iban for a discount type initiative,
            WALLET_ENROLL_INSTRUMENT_NOT_ALLOWED_FOR_REFUND_INITIATIVE: It is not possible to enroll
            a IDPayCode for a refund type initiative,
            WALLET_INITIATIVE_ENDED: The operation is not allowed because the initiative has already ended,
            WALLET_USER_NOT_ONBOARDED: User not onboarded on this initiative,
            WALLET_IBAN_NOT_ITALIAN: Iban is not italian,
            WALLET_INSTRUMENT_ALREADY_ASSOCIATED: Payment Instrument is already associated to another user,
            WALLET_INSTRUMENT_DELETE_NOT_ALLOWED: It's not possible to delete an instrument of AppIO payment types,
            WALLET_INSTRUMENT_IDPAYCODE_NOT_FOUND: idpayCode is not found for the current user,
            WALLET_SUSPENSION_NOT_ALLOWED_FOR_USER_STATUS: It is not possible to suspend the
            user on initiative,
            WALLET_READMISSION_NOT_ALLOWED_FOR_USER_STATUS: It is not possible to readmit
            the user on initiative,
            WALLET_INSTRUMENT_NOT_FOUND: The selected payment instrument has not been found for the current user,
            WALLET_GENERIC_ERROR: Application error,
            WALLET_INVALID_REQUEST: Something went wrong handling the request,
            WALLET_TOO_MANY_REQUESTS: Too many requests on the ms
            - IT: Codice di errore:
            WALLET_USER_UNSUBSCRIBED: L'utente si è disiscritto dall'iniziativa,
            WALLET_ENROLL_INSTRUMENT_NOT_ALLOWED_FOR_DISCOUNT_INITIATIVE: Non è possibile associare
            uno strumento di pagamento per un'iniziativa di tipo a sconto,
            WALLET_ENROLL_IBAN_NOT_ALLOWED_FOR_DISCOUNT_INITIATIVE: Non è possibile associare un iban per un'iniziativa di tipo a sconto,
            WALLET_ENROLL_INSTRUMENT_NOT_ALLOWED_FOR_REFUND_INITIATIVE: Non è possibile associare un
            IDPayCode per una iniziativa di tipo a rimborso,
            WALLET_INITIATIVE_ENDED: L'operazione non è consentita perché l'iniziativa è scaduta,
            WALLET_USER_NOT_ONBOARDED: Utente non onboardato all'inziativa,
            WALLET_IBAN_NOT_ITALIAN: L'Iban non è italiano,
            WALLET_INSTRUMENT_ALREADY_ASSOCIATED: Lo strumento di pagamento è già associato
            ad un altro utente,
            WALLET_INSTRUMENT_DELETE_NOT_ALLOWED: Non è possibile eliminare uno strumento di tipo AppIO,
            WALLET_INSTRUMENT_IDPAYCODE_NOT_FOUND: L'idpayCode non è stato trovato per l'utente corrente,,
            WALLET_SUSPENSION_NOT_ALLOWED_FOR_USER_STATUS: Non è possibile sospendere l'utente dall'iniziativa,
            WALLET_READMISSION_NOT_ALLOWED_FOR_USER_STATUS: Non è possibile riammettere
            l'utente all'iniziativa,
            WALLET_INSTRUMENT_NOT_FOUND: Lo strumento di pagamento selezionato non è stato trovato per l'utente corrente,
            WALLET_GENERIC_ERROR: Errore generico,
            WALLET_INVALID_REQUEST: Qualcosa è andato storto durante l'invio della richiesta,
            WALLET_TOO_MANY_REQUESTS: Troppe richieste"
        message:
          type: string
          description: 'ENG: Error message- IT: Messaggio di errore'
    OnboardingErrorDTO:
      type: object
      required:
        - code
        - message
      properties:
        code:
          type: string
          enum:
            - ONBOARDING_USER_UNSUBSCRIBED
            - ONBOARDING_PAGE_SIZE_NOT_ALLOWED
            - ONBOARDING_PDND_CONSENT_DENIED
            - ONBOARDING_SELF_DECLARATION_NOT_VALID
            - ONBOARDING_SUSPENSION_NOT_ALLOWED_FOR_USER_STATUS
            - ONBOARDING_READMISSION_NOT_ALLOWED_FOR_USER_STATUS
            - ONBOARDING_INVALID_REQUEST
            - ONBOARDING_USER_NOT_IN_WHITELIST
            - ONBOARDING_INITIATIVE_NOT_STARTED
            - ONBOARDING_INITIATIVE_ENDED
            - ONBOARDING_BUDGET_EXHAUSTED
            - ONBOARDING_INITIATIVE_STATUS_NOT_PUBLISHED
            - ONBOARDING_TECHNICAL_ERROR
            - ONBOARDING_UNSATISFIED_REQUIREMENTS
            - ONBOARDING_GENERIC_ERROR
            - ONBOARDING_USER_NOT_ONBOARDED
            - ONBOARDING_INITIATIVE_NOT_FOUND
            - ONBOARDING_TOO_MANY_REQUESTS
          description: >-
            "ENG: Error code:
            ONBOARDING_USER_UNSUBSCRIBED: The user has unsubscribed from initiative,
            ONBOARDING_PAGE_SIZE_NOT_ALLOWED: Page size not allowed,
            ONBOARDING_PDND_CONSENT_DENIED: The PDND consent was denied by the user for the initiative,
            ONBOARDING_SELF_DECLARATION_NOT_VALID: The self-declaration criteria are not
            valid for the initiative or those inserted by the user do not match those required by the initiative,
            ONBOARDING_SUSPENSION_NOT_ALLOWED_FOR_USER_STATUS: It is not possible to suspend
            the user on initiative,
            ONBOARDING_READMISSION_NOT_ALLOWED_FOR_USER_STATUS: It is not possible to readmit the user on initiative,
            ONBOARDING_INVALID_REQUEST: Something went wrong handling the request,
            ONBOARDING_USER_NOT_IN_WHITELIST: The current user is not allowed to participate to the initiative,
            ONBOARDING_INITIATIVE_NOT_STARTED: The initiative has not yet begun,
            ONBOARDING_INITIATIVE_ENDED: The initiative ended,
            ONBOARDING_BUDGET_EXHAUSTED: Budget exhausted for initiative,
            ONBOARDING_INITIATIVE_STATUS_NOT_PUBLISHED: The initiative is not active,
            ONBOARDING_TECHNICAL_ERROR: A technical error occurred during the onboarding process,
            ONBOARDING_UNSATISFIED_REQUIREMENTS: The user does not satisfy the requirements set for the initiative,
            ONBOARDING_GENERIC_ERROR: Application error,
            ONBOARDING_USER_NOT_ONBOARDED: The current user is not onboarded on initiative,
            ONBOARDING_INITIATIVE_NOT_FOUND: Cannot find initiative,
            ONBOARDING_TOO_MANY_REQUESTS: Too many requests
            - IT: Codice di errore:
            ONBOARDING_USER_UNSUBSCRIBED: L'utente si è disiscritto dall'iniziativa,
            ONBOARDING_PAGE_SIZE_NOT_ALLOWED: Dimensione pagina non permessa,
            ONBOARDING_PDND_CONSENT_DENIED: Il consenso PDND per l'iniziativa è stato negato dall'utente,
            ONBOARDING_SELF_DECLARATION_NOT_VALID: I criteri di autodichiarazione non sono
            validi per l'iniziativa o quelli inseriti dall'utente
            non corrispondono con quelli richiesti dall'iniziativa,
            ONBOARDING_SUSPENSION_NOT_ALLOWED_FOR_USER_STATUS: Non è possibile sospendere
            l'utente dall'iniziativa,
            ONBOARDING_READMISSION_NOT_ALLOWED_FOR_USER_STATUS: Non è possibile riammettere l'utente all'iniziativa,
            ONBOARDING_INVALID_REQUEST: Qualcosa è andato storto durante l'invio della richiesta,
            ONBOARDING_USER_NOT_IN_WHITELIST: L'utente corrente non ha il permesso di partecipare all'iniziativa,
            ONBOARDING_INITIATIVE_NOT_STARTED: L'iniziativa non è ancora partita,
            ONBOARDING_INITIATIVE_ENDED: L'iniziativa è terminata,
            ONBOARDING_BUDGET_EXHAUSTED: Il budget dell'iniziativa è esaurito,
            ONBOARDING_INITIATIVE_STATUS_NOT_PUBLISHED: L'iniziativa non è attiva,
            ONBOARDING_TECHNICAL_ERROR: Si è verificato un errore tecnico durante il processo di adesione,
            ONBOARDING_UNSATISFIED_REQUIREMENTS: L'utente non soddisfa i requisiti che sono stati richiesti per l'iniziativa,
            ONBOARDING_GENERIC_ERROR: Errore applicativo,
            ONBOARDING_USER_NOT_ONBOARDED: Utente non onboardato all'iniziativa,
            ONBOARDING_INITIATIVE_NOT_FOUND: Iniziativa non trovata,
            ONBOARDING_TOO_MANY_REQUESTS: Troppe richieste"
        message:
          type: string
          description: 'ENG: Error message- IT: Messaggio di errore'
    TransactionErrorDTO:
      type: object
      required:
        - code
        - message
      properties:
        code:
          type: string
          enum:
            - PAYMENT_NOT_FOUND_OR_EXPIRED
            - PAYMENT_TRANSACTION_EXPIRED
            - PAYMENT_INITIATIVE_NOT_FOUND
            - PAYMENT_INITIATIVE_INVALID_DATE
            - PAYMENT_INITIATIVE_NOT_DISCOUNT
            - PAYMENT_ALREADY_AUTHORIZED
            - PAYMENT_ALREADY_CANCELLED
            - PAYMENT_BUDGET_EXHAUSTED
            - PAYMENT_GENERIC_REJECTED
            - PAYMENT_TOO_MANY_REQUESTS
            - PAYMENT_GENERIC_ERROR
            - PAYMENT_USER_SUSPENDED
            - PAYMENT_USER_NOT_ONBOARDED
            - PAYMENT_USER_UNSUBSCRIBED
            - PAYMENT_ALREADY_ASSIGNED
            - PAYMENT_NOT_ALLOWED_FOR_TRX_STATUS
            - PAYMENT_NOT_ALLOWED_MISMATCHED_MERCHANT
            - PAYMENT_USER_NOT_ASSOCIATED
            - PAYMENT_DELETE_NOT_ALLOWED_FOR_TRX_STATUS
            - PAYMENT_UNRELATE_NOT_ALLOWED_FOR_TRX_STATUS
            - PAYMENT_AMOUNT_NOT_VALID
            - PAYMENT_MERCHANT_NOT_ONBOARDED
            - PAYMENT_INVALID_REQUEST
            - PAYMENT_STATUS_NOT_VALID
          description: >-
            "ENG: Error code:
            PAYMENT_NOT_FOUND_OR_EXPIRED: transaction not found or expired
            PAYMENT_TRANSACTION_EXPIRED: transaction expired
            PAYMENT_INITIATIVE_NOT_FOUND: initiative not found
            PAYMENT_INITIATIVE_INVALID_DATE: initiative invalid date
            PAYMENT_INITIATIVE_NOT_DISCOUNT: initiative is not of discount type
            PAYMENT_ALREADY_AUTHORIZED: transaction already authorized
            PAYMENT_ALREADY_CANCELLED: transaction already cancelled,
            PAYMENT_BUDGET_EXHAUSTED: budget exhausted
            PAYMENT_GENERIC_REJECTED: generic rejected error (transaction rejected)
            PAYMENT_TOO_MANY_REQUESTS: too many request, retry
            PAYMENT_GENERIC_ERROR: application error (connection microservice error)
            PAYMENT_USER_SUSPENDED: the user has been suspended on the initiative
            PAYMENT_USER_NOT_ONBOARDED: user not onboarded
            PAYMENT_USER_UNSUBSCRIBED: user unsubscribed
            PAYMENT_ALREADY_ASSIGNED:  transaction already assigned
            PAYMENT_NOT_ALLOWED_FOR_TRX_STATUS: operation on transaction not allowed due to status
            PAYMENT_NOT_ALLOWED_MISMATCHED_MERCHANT: operation on transaction not allowed due to merchant mismatched
            PAYMENT_USER_NOT_ASSOCIATED: user not associated to the transaction
            PAYMENT_DELETE_NOT_ALLOWED_FOR_TRX_STATUS: cancellation of transaction not allowed due to status
            PAYMENT_UNRELATE_NOT_ALLOWED_FOR_TRX_STATUS: unrelate transaction not allowed due to status
            PAYMENT_AMOUNT_NOT_VALID: amount of transaction not valid
            PAYMENT_MERCHANT_NOT_ONBOARDED: the merchant is not onboarded
            PAYMENT_INVALID_REQUEST: request validation error
            PAYMENT_STATUS_NOT_VALID: transaction status not valid
            IT: Codice di errore
            PAYMENT_NOT_FOUND_OR_EXPIRED: transazione non trovata oppure scaduta
            PAYMENT_TRANSACTION_EXPIRED: transazione scaduta
            PAYMENT_INITIATIVE_NOT_FOUND: iniziativa non trovata
            PAYMENT_INITIATIVE_INVALID_DATE: iniziativa con data invalida
            PAYMENT_INITIATIVE_NOT_DISCOUNT: iniziativa non è di tipo a sconto
            PAYMENT_ALREADY_AUTHORIZED: transazione già autorizzata
            PAYMENT_ALREADY_CANCELLED: transazione già cancellata,
            PAYMENT_BUDGET_EXHAUSTED: budget esaurito
            PAYMENT_GENERIC_REJECTED: errore generico, transazione rigettata
            PAYMENT_TOO_MANY_REQUESTS: troppe richieste, riprovare
            PAYMENT_GENERIC_ERROR: errore generico (errore nella connessione ad un microservizio)
            PAYMENT_USER_SUSPENDED: l'utente è stato sospeso dall'iniziativa
            PAYMENT_USER_NOT_ONBOARDED: utente non onboardato all'iniziativa
            PAYMENT_USER_UNSUBSCRIBED: utente disiscritto dall'iniziativa
            PAYMENT_ALREADY_ASSIGNED:  transazione già assegnata
            PAYMENT_NOT_ALLOWED_FOR_TRX_STATUS: transazione non consentita a causa dello stato della transazione
            PAYMENT_NOT_ALLOWED_MISMATCHED_MERCHANT: transazione non consentita a causa della mancata corrispondenza del merchant
            PAYMENT_USER_NOT_ASSOCIATED: utente non associato alla transazione
            PAYMENT_DELETE_NOT_ALLOWED_FOR_TRX_STATUS: annullamento della transazione non consentito a causa dello stato della transazione
            PAYMENT_UNRELATE_NOT_ALLOWED_FOR_TRX_STATUS: disassociazione non consentita a causa dello stato della transazione
            PAYMENT_AMOUNT_NOT_VALID: importo nella transazione non valido
            PAYMENT_MERCHANT_NOT_ONBOARDED: il merchant non è onboardato
            PAYMENT_INVALID_REQUEST: errore di validazione della richiesta
            PAYMENT_STATUS_NOT_VALID: stato della transazione non valido"
        message:
          type: string
          description: 'ENG: Error message- IT: Messaggio di errore'
    PaymentInstrumentErrorDTO:
      type: object
      required:
        - code
        - message
      properties:
        code:
          type: string
          enum:
            - PAYMENT_INSTRUMENT_PIN_LENGTH_NOT_VALID
            - PAYMENT_INSTRUMENT_INVALID_REQUEST
            - PAYMENT_INSTRUMENT_ALREADY_ASSOCIATED
            - PAYMENT_INSTRUMENT_DELETE_NOT_ALLOWED
            - PAYMENT_INSTRUMENT_ENCRYPTION_ERROR
            - PAYMENT_INSTRUMENT_DECRYPTION_ERROR
            - PAYMENT_INSTRUMENT_ENROLL_NOT_ALLOWED_FOR_REFUND_INITIATIVE
            - PAYMENT_INSTRUMENT_INITIATIVE_ENDED
            - PAYMENT_INSTRUMENT_USER_UNSUBSCRIBED
            - PAYMENT_INSTRUMENT_NOT_FOUND
            - PAYMENT_INSTRUMENT_IDPAYCODE_NOT_FOUND
            - PAYMENT_INSTRUMENT_USER_NOT_ONBOARDED
            - PAYMENT_INSTRUMENT_TOO_MANY_REQUESTS
            - PAYMENT_INSTRUMENT_GENERIC_ERROR
          description: >-
            "ENG: Error code:
            PAYMENT_INSTRUMENT_PIN_LENGTH_NOT_VALID: Pin length is not valid,
            PAYMENT_INSTRUMENT_INVALID_REQUEST: Something went wrong handling the request,
            PAYMENT_INSTRUMENT_ALREADY_ASSOCIATED: Payment Instrument is already associated to another user,
            PAYMENT_INSTRUMENT_DELETE_NOT_ALLOWED: It's not possible to delete an instrument of AppIO payment types,
            PAYMENT_INSTRUMENT_ENCRYPTION_ERROR: Something went wrong creating SHA256 digest,
            PAYMENT_INSTRUMENT_DECRYPTION_ERROR: Something gone wrong while extracting datablock from pinblock,
            PAYMENT_INSTRUMENT_ENROLL_NOT_ALLOWED_FOR_REFUND_INITIATIVE: It is not possible to enroll a idpayCode for a refund type initiative,
            PAYMENT_INSTRUMENT_INITIATIVE_ENDED: The operation is not allowed because the initiative has already ended,
            PAYMENT_INSTRUMENT_USER_UNSUBSCRIBED: The user has unsubscribed from initiative,
            PAYMENT_INSTRUMENT_NOT_FOUND: The selected payment instrument has not been found for the current user,
            PAYMENT_INSTRUMENT_IDPAYCODE_NOT_FOUND: idpayCode is not found for the current user,
            PAYMENT_INSTRUMENT_USER_NOT_ONBOARDED: The current user is not onboarded on initiative,
            PAYMENT_INSTRUMENT_TOO_MANY_REQUESTS: Too many requests,
            PAYMENT_INSTRUMENT_GENERIC_ERROR Application error:
            - IT: Codice di errore:
            PAYMENT_INSTRUMENT_PIN_LENGTH_NOT_VALID: Lunghezza del pin non valida,
            PAYMENT_INSTRUMENT_INVALID_REQUEST: Qualcosa è andato storto durante l'invio della richiesta,
            PAYMENT_INSTRUMENT_ALREADY_ASSOCIATED: Lo strumento di pagamento è già associato ad un altro utente,
            PAYMENT_INSTRUMENT_DELETE_NOT_ALLOWED: Non è possibile eliminare uno strumento di pagamento di tipo AppIO,
            PAYMENT_INSTRUMENT_ENCRYPTION_ERROR: Qualcosa è andato storto durante la creazione del digest SHA256,
            PAYMENT_INSTRUMENT_DECRYPTION_ERROR: Qualcosa è andato storto durante l'estrazione del datablock dal pinblock,
            PAYMENT_INSTRUMENT_ENROLL_NOT_ALLOWED_FOR_REFUND_INITIATIVE: Non è possibile enrollare un idpayCode per un'iniziativa di tipo a rimborso,
            PAYMENT_INSTRUMENT_INITIATIVE_ENDED: L'operazione non è consentita perché l'iniziativa è scaduta,
            PAYMENT_INSTRUMENT_USER_UNSUBSCRIBED: L'utente si è disiscritto dall'iniziativa,
            PAYMENT_INSTRUMENT_NOT_FOUND:  Lo strumento di pagamento selezionato non è stato trovato per l'utente corrente,
            PAYMENT_INSTRUMENT_IDPAYCODE_NOT_FOUND: L'idpayCode non è stato trovato per l'utente corrente,
            PAYMENT_INSTRUMENT_USER_NOT_ONBOARDED: L'utente corrente non è onboardato all'iniziativa,
            PAYMENT_INSTRUMENT_TOO_MANY_REQUESTS: Troppe richieste,
            PAYMENT_INSTRUMENT_GENERIC_ERROR: Errore generico"
        message:
          type: string
          description: 'ENG: Error message- IT: Messaggio di errore'
    FamilyUnitCompositionDTO:
      type: object
      required:
        - usersList
      properties:
        usersList:
          type: array
          items:
            $ref: '#/components/schemas/OnboardingDetailDTO'
          description: "ENG: List of citizens belonging to family <br> IT: Lista dei membri appartenenti al nucleo familiare"
    InitiativeErrorDTO:
      type: object
      properties:
        code:
          type: string
          enum:
            - INITIATIVE_ADMIN_ROLE_NOT_ALLOWED
            - INITIATIVE_INVALID_REQUEST
            - INITIATIVE_NOT_FOUND
            - INITIATIVE_TOO_MANY_REQUESTS
            - INITIATIVE_GENERIC_ERROR
          description: >-
            "ENG: Error code:
             INITIATIVE_ADMIN_ROLE_NOT_ALLOWED: This operation is not allowed for admin role,
             INITIATIVE_INVALID_REQUEST: Something went wrong handling the request,
             INITIATIVE_NOT_FOUND: Initiative not found,
             INITIATIVE_TOO_MANY_REQUESTS: Too many requests,
             INITIATIVE_GENERIC_ERROR: Application error,
             - IT: Codice di errore:
             INITIATIVE_ROLLBACK_TO_PREVIOUS_STATUS: Errore durante la pubblicazione dell'iniziativa lo stato dell'iniziativa sarà riportato al suo stato precedente,
             INITIATIVE_WHITELIST_INVALID_PROPERTIES: Le proprietà dell'iniziativa non sono valide per iniziativa con beneficiario noto,
             INITIATIVE_INVALID_LOCALE_FORMAT: Iniziativa non trovata a causa di format locale non valido,
             INITIATIVE_ITALIAN_LANGUAGE_REQUIRED_FOR_DESCRIPTION: Lingua italiana richiesta per la descrizione dell'iniziativa,
             INITIATIVE_CANNOT_BE_DELETED: L'iniziativa con lo stato corrente non può essere eliminata,
             INITIATIVE_ADMIN_ROLE_NOT_ALLOWED: Questa operazione non è concessa per il ruolo di admin,
             INITIATIVE_STATUS_NOT_VALID: L'iniziativa non processabile per lo stato non valido,
             INITIATIVE_AUTOMATED_CRITERIA_NOT_VALID_ORDER_DIRECTION_MISSING: I criteri automatizzati per l'iniziativa di tipo ranking non sono validi perché manca OrderDirection,
             INITIATIVE_AUTOMATED_CRITERIA_NOT_VALID_EQUALS_OPERATOR: I criteri automatizzati per l'iniziativa di tipo ranking non sono validi perché è utilizzato un operatore uguale,
             INITIATIVE_AUTOMATED_CRITERIA_NOT_VALID_ISEE_MISSING: I criteri automatizzati per l'iniziativa di tipo ranking non sono validi perché manca l'ISEE,
             INITIATIVE_AUTOMATED_CRITERIA_NOT_VALID_TYPOLOGY_ISEE_MISSING: I criteri automatizzati per l'iniziativa di tipo ranking non sono validi perché manca la tipologia di ISEE,
             INITIATIVE_AUTOMATED_CRITERIA_NOT_VALID_BENEFICIARY_NF_ISEE_MISSING: I criteri automatizzati per l'iniziativa di tipo nucleo familiare non sono validi perchè manca l'ISEE,
             INITIATIVE_VALIDATION_WIZARD_VIOLATIONS: La validazione dell'iniziativa è fallita a causa delle violazioni durante la procedura,
             INITIATIVE_REWARD_RULES_NOT_VALID: Regole sul tipo di premio non valide,
             INITIATIVE_REFUND_RULES_NOT_VALID: Regole di rimborso non valide,
             INITIATIVE_FAMILY_UNIT_COMPOSITION_NOT_VALID: La composizione del nucleo familiare non è valida,
             INITIATIVE_START_DATE_AND_END_DATE_NOT_VALID: La data di inizio e di fine inserite non sono valide,
             INITIATIVE_YEAR_VALUE_NOT_VALID: Il valore dell'anno inserito non è valido,
             INITIATIVE_INVALID_REQUEST: Qualcosa è andato storto durante l'invio della richiesta,
             INITIATIVE_NOT_FOUND: Iniziativa non trovata,
             INITIATIVE_PRIMARY_AND_SECONDARY_TOKEN_IO_NOT_FOUND: token IO primario e secondario non trovati,
             INITIATIVE_LOGO_ERROR: Qualcosa è andato storto durante il caricamento del logo,
             INITIATIVE_TOO_MANY_REQUESTS: Troppe richieste,
             INITIATIVE_GENERIC_ERROR: Errore generico"
        message:
          type: string
          description: "ENG: Error message - IT: Messaggio di errore"
    OnboardingDetailDTO:
      type: object
      required:
        - code
        - message
        - details
      properties:
        fiscalCode:
          type: string
          description: "ENG: Citizen fiscal code <br> IT: Codice fiscale del cittadino"
        familyId:
          type: string
          description: "ENG: Family id <br> IT: Id del nucleo familiare"
        onboardingDate:
          type: string
          format: date
          description: "ENG: Date of onboarding <br> IT: Data dell'adesione"
        status:
          enum:
            - INVITED
            - ACCEPTED_TC
            - DEMANDED
            - ON_EVALUATION
            - ONBOARDING_KO
            - ELIGIBLE_KO
            - ONBOARDING_OK
            - INACTIVE
            - UNSUBSCRIBED
            - SUSPENDED
          type: string
          description: "ENG: Status of the citizen onboarding <br> IT: Stato dell'onboarding del cittadino"
    MerchantErrorDTO:
      type: object
      required:
        - code
        - message
      properties:
        code:
          type: string
          enum:
            - MERCHANT_NOT_FOUND
            - MERCHANT_NOT_ONBOARDED
            - MERCHANT_TOO_MANY_REQUESTS
            - MERCHANT_INVALID_REQUEST
            - MERCHANT_GENERIC_ERROR
          description: >-
            "ENG: Error code:<br>
            MERCHANT_NOT_FOUND: The merchant was not found,<br>
            MERCHANT_NOT_ONBOARDED: The merchant is not associated to the initiative,<br>
            MERCHANT_TOO_MANY_REQUESTS: Too many requests,<br>
            MERCHANT_INVALID_REQUEST: Something went wrong handling the request,<br>
            MERCHANT_GENERIC_ERROR: Application error,<br>
            - IT: Codice di errore:<br>
            MERCHANT_NOT_FOUND: L'esercente non è stato trovato,<br>
            MERCHANT_NOT_ONBOARDED: L'esercente non è associato all'iniziativa,<br>
            MERCHANT_TOO_MANY_REQUESTS: Troppe richieste,<br>
            MERCHANT_INVALID_REQUEST: Qualcosa è andato storto durante l'invio della richiesta,<br>
            MERCHANT_GENERIC_ERROR: Errore applicativo"
        message:
          type: string
          description: 'ENG: Error message- IT: Messaggio di errore'
  securitySchemes:
    Bearer:
      type: apiKey
      name: Authorization
      in: header
security:
  - Bearer: []
